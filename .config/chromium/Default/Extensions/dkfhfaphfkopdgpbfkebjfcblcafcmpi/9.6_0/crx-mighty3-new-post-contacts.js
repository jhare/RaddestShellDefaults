var isCorsSupported=_0b5785bfeeeb9c31de9bed5f807fb9706ac9909209ebf42f26b88d83ccdb3cbe9c2ec95be6494d7d(),baseUrl="https://textyserver.appspot.com",contactsOAuthClientID="82288362851-h3jq02v23ctb7012e8bher02un8fk6n2.apps.googleusercontent.com",dest_num="";
-1<location.hash.search("0-35")?(baseUrl="https://0-35.textyserver.appspot.com",contactsOAuthClientID="82288362851-5030tstki1f1nain3ras3lbnhvafa7n3.apps.googleusercontent.com",alert("overriding URL to: "+baseUrl)):-1<location.hash.search("0-")&&(baseUrl="https://1-dot-"+location.hash.substr(1)+"-dot-textyserver.appspot.com",contactsOAuthClientID="82288362851-5030tstki1f1nain3ras3lbnhvafa7n3.apps.googleusercontent.com",$("#debug-environment-text").text("DEV"),alert("overriding URL to: "+baseUrl));
var signInUrl=baseUrl+"/signin?continue_web= "+location.href,signOutUrl=baseUrl+"/signout?continue_web= "+location.href,newContactsOAuthURL="https://accounts.google.com/o/oauth2/auth?client_id="+contactsOAuthClientID+"&redirect_uri="+baseUrl+"/contacts-sync&scope=https://www.google.com/m8/feeds/&response_type=code&access_type=offline&approval_prompt=force",global_oauth_contacts_token="gcontacts_token_placeholder",globalContactsRefreshCacheQueue=[],globalQueueContactImagesToFetch=[],globalPHONEContactsRefreshCacheQueue=
[],contactsFromPhoneGlobal=[],global_time_last_CAPI_msg_received_webapp=new Date-6E5,current_server_stored_google_contacts_token=void 0,alertFallback=!1;if("undefined"===typeof console||"undefined"===typeof console.log)console={},console.log=alertFallback?function(a){alert(a)}:function(){};var googleContactsArray=null,searchAutocompleteArray=null,newBestGoogleContactsArray=null,newBestGoogleContactsArray=[],inWebAppGlobalNotifArray=[];
function _f2ac03f649b67f06cd91845cd33d302c06378eba0ad0144e12526132b8bd147b23f0b12e971796f6(){var a=inWebAppGlobalNotifArray.shift(this);console.log("---");console.log(a);a.cancel()}
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();
function _2c3b36d7fe586bbca3cf09e9f96e12c289292a904d94c95b1d2403830b6870ebe0895b7bed4eaa3b(a){var b=window.location.pathname;-1<b.search("dev")||-1<b.search("IEEEE-DEV")?(b="",-1<location.hash.search("0-")&&(b=" ("+location.hash.substr(1)+")"),_d9ce0d27341e534bdb5bd4541df2678a52dcdeaa35f4797a8c080364d827adfa7c9778861f235d13(a),$("#debug-environment-text").show().text("DEV"+b),$("#top-header").css("background","#2d3038")):-1<b.search("staging")&&(_d9ce0d27341e534bdb5bd4541df2678a52dcdeaa35f4797a8c080364d827adfa7c9778861f235d13(a),
$("#debug-environment-text").show().text("STAGING"),$("#top-header").css("background","yellow"))}
function _cd0613ba91fbab0c5af2827e308e487e267d28a0c0057b53d0814212f6092f24657de2cc3d7272d6(){if(window.webkitNotifications){var a=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png","Bootup test subject","test content");a.onclick=function(){window.focus();this.cancel()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _8157ecde16ca5500beece3b789073ce40b9c53150b3f84ed66070ee1e3f192b843b3bc25731ee302(){if(window.webkitNotifications){var a=window.webkitNotifications.createHTMLNotification("test-notification.html#1");a.onclick=function(){window.focus()};a.show()}else alert("Notifications are not supported for this Browser/OS version yet.")}
function _94465b616bbb8d1816a4188b8f161c664325c306cac6f9be4458fc3b0106f31eaeee90c7c67209ef(){"Firefox"==BrowserDetect.browser&&(window.webkitNotifications?_kmq.push(["record","Firefox Webkit Notif CAPABLE"]):_kmq.push(["record","Firefox Webkit Notif NOT capable"]),0!=window.webkitNotifications.checkPermission()&&$("#request_html_notif_permission").show())}
function _c5cf00bbdf61d0875c69e0797e58c9893eda0b78204c466e27c04b48f34fb26feb19a8f7c8aac8dd(){1>$("#send-one-text").val().length?alert("Error: Message is blank"):_602856952e1d059e9e9997fb77126201d8422c5678ab44e2518c62ffc04ad044f4a07f1369a59523()}
function _65a434281750bc88aabf841302e5b30f622855f9cbd945ec5703b31069f1c841e93219704f331d6f(a,b,c){var d=baseUrl+"/content?function=deleteMessagesByMsgID",d=d+("&id="+encodeURIComponent(a));console.log(d);var e="#sms-line-item-msgid-"+a;$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"deleteOneMsg",success:function(a){console.log(a);console.log(a.num_deleted);if(1!=a.num_deleted)alert("Error - Message not Deleted. Please report to MightyText team (Error Code: DT56)");else if($(e).fadeOut(400,
function(){$(this).remove();document.getElementById("msg").innerHTML="Deleted Message";_gaq.push(["_trackEvent","WebApp","Delete-Message-Single","",1])}),10==c||11==c)a="#thread-count-live-updated-"+b,1==parseInt($(a).text())?_e9563709cdca754436f8e9f15a4e77cd08f194d9d77792b60e2588be4f22f3e344c2f31ae56e7ab9(b):$(a).text(parseInt($(a).text())-1)}})}
function _e9563709cdca754436f8e9f15a4e77cd08f194d9d77792b60e2588be4f22f3e344c2f31ae56e7ab9(a){$("#"+a).parent().fadeOut(600,function(){$(this).remove()});_b27140a17a379048c392e97a3c84c534b6c42bf9fbce66f99c809283638f344ecb3d50674ea64189()}
function _7748eee5b0090d4578d96130d8e215a12d2be7cd6249b4fa89fe94e6d65d52424325137b5c761875(a,b){var c=$("ul#tabs-phone-threads li:first");console.log(c);c="#"+a;if(0<$(c).length){console.log("it is an existing thread, now check if that thread is already at top");var d=$(c).parent();console.log(d);$("ul#tabs-phone-threads li:first a").attr("id")!=a?($(c).parent().prependTo("#tabs-phone-threads").hide().slideDown(),$(c).hide().show("highlight",{color:"#F9EEC0"},2E3),setTimeout(_2591a51c0a12a4c4b99d2d26c9af2414a5fca09053c46e0597d45db42ffa67556ab97e44e9b91740,
200)):console.log("thread is already at the top -- don't move thread/tabs at all")}else _b7c8af7d481f7d5b5c826864b31cf351da598e7819cecfc7c1fb12d38d93d583ee6ff289f4f9de10(a,b)}
function _b7c8af7d481f7d5b5c826864b31cf351da598e7819cecfc7c1fb12d38d93d583ee6ff289f4f9de10(a,b){var c="",d="img/silhouette.jpg",e=!1;global_oauth_contacts_token&&(e=!0);console.log("phone_num_clean, right before jstorage get call is: "+a);var g=[];0!=a&&(g=$.jStorage.get(a,"no-jstorage-val-found"));g.name?(c=g.name,console.log(a+" - Local Storage contact match to name: "+c),""!=g.thumbnail_image_google_base_url&&(d=g.thumbnail_image_google_base_url+"&oauth_token="+global_oauth_contacts_token),g=_ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f()-
g.time_stored,21600<g&&e&&(console.log("should refresh local contact cache for "+a+" -- seconds old: "+g),globalContactsRefreshCacheQueue.unshift(a),setTimeout(_b9cc0a8c51d81f5ef1a75ad2fa70f5482ad0e3e66d4b7b1893b3f66f0a5dbebfeb74387e5b11c1d5,100))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call _1a5270e66ed4ca6b0227a4ebf6a959157221262be6aa6aeadd2753e78b30084ef65fd32073251595"),c=b,e&&(globalContactsRefreshCacheQueue.unshift(a),setTimeout(_b9cc0a8c51d81f5ef1a75ad2fa70f5482ad0e3e66d4b7b1893b3f66f0a5dbebfeb74387e5b11c1d5,
100)));c='<li id="tabNEW-'+a+'" class="ui-state-default ui-corner-top">'+('<a title="'+b+'" id="'+a+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+a+'" class="threadnamenumber">'+c+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+a+'">1</span>)<br> <span id="timestamp-last-msg">'+_3da4048ffc556b9d6c7ae43f64d7eed7675ef9843b38b789da2f768c8e9ad5c498ca6be82ff9febdDisplayPurposes(new Date,!1)+"</span></span></span>");
c+='<img id="thumbnail-if-known-'+a+'" class="g-thumb-image-load-now" style="margin-right:0px;float:right" width=45 height=45 src="'+d+'"> </a></li>';setTimeout(_2591a51c0a12a4c4b99d2d26c9af2414a5fca09053c46e0597d45db42ffa67556ab97e44e9b91740,200);$(c).prependTo("#tabs-phone-threads").hide().slideDown()}
function _2591a51c0a12a4c4b99d2d26c9af2414a5fca09053c46e0597d45db42ffa67556ab97e44e9b91740(){$("#resultholder").tabs({add:function(a){console.log(a)}});$("#tabs-phone-threads").scrollTo("0%",400)}
function _b3427d13ff23106acb958f9d1235f5a117f832617f204b124163beacdd4e9c3443206592ad6b8430(a){var b=baseUrl+"/content?function=deleteMessagesByPhoneNum",b=b+("&phone_num_clean="+encodeURIComponent(a));console.log(b);$.ajax({url:b,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"deleteByThreadCallback",success:function(b){0<b.num_deleted?(document.getElementById("msg").innerHTML="Deleted Thread. Number of messages deleted: "+b.num_deleted,_gaq.push(["_trackEvent","WebApp","Delete-Entire-Thread",
"WebAppPageView",b.num_deleted]),_e9563709cdca754436f8e9f15a4e77cd08f194d9d77792b60e2588be4f22f3e344c2f31ae56e7ab9(a)):alert("Error - Message Thread Not Deleted. Please try again. If it continues, please report to MightyText team (Error Code: TRDLT79)")}})}
function _b27140a17a379048c392e97a3c84c534b6c42bf9fbce66f99c809283638f344ecb3d50674ea64189(){$("#sms-thread-content").empty();$("#thread-heading-name").empty();$("#sendbox-main").val("");$("#charsLeft-main").text("500");$("#thread-heading-actions").hide();$("#inputsms-main").hide();$("#mms-image-preview").hide();$("#mms-image-preview").attr("src","");$("#mms-blob-id-holder").text("")}
function _4cd95c22d8038a604f7b4512bf99d1d802fbd09330b215f531f009f2e6967db02e58354f71d44dc2(a){var b="",b=$("#compose-single-text")[0]?"#send-one-text":"#sendbox-main";if(0<$(b).val().length){if(1==a)return!0;if(!confirm("You've typed text that you haven't sent. Are you sure you want to leave this page before sending this message?"))return $(b).focus(),!0}return!1}
function _1085a4e3eeac56f979b057fc10273b6e57db69b3de98a08e897db676d3471e129ce732ad0dbcfad9(a,b){console.log("Generating Tabs...");$(function(){$("#resultholder").tabs({selected:a,ajaxOptions:{error:function(a,b,e,g){$(g.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});console.log("JUST SET UP TABS");b||setTimeout("_ced360f6bdaf62dee9cdda4247d5f11fc14ec467976ca5047eb58b760068a0fb84a9b57cdca4529e();",2500);setTimeout("getAllMessagesForSearch();",1E3);setTimeout("_183266647d6f4176941e4f96cd8f33b92c68b6d6da6b69b54c155e77f8053bea9a79cbf304845ef6();",
2E3);dynamic_content_load()});$("#resultholder").bind("tabsselect",function(a,b){var e=b.index+1;_gaq.push(["_trackEvent","WebApp","Thread-Tab-Click-Position","tab-click-position-"+e,e]);if(!$("#settingsPane")[0]&&_4cd95c22d8038a604f7b4512bf99d1d802fbd09330b215f531f009f2e6967db02e58354f71d44dc2())return!1;if($("#compose-single-text")[0]||$("#settingsPane")[0])e=b.index,_7ac2c3cf1801eb7865b44e127cd5dd987ec6416b420c07734533d784cad658c5c97ae404933816e3(),$("#resultholder").tabs("disable"),$("#resultholder").tabs("destroy"),
$("#resultholder").tabs({selected:e,ajaxOptions:{error:function(a,b,c,d){$(d.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible.")}}});$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0"}});document.getElementById("msg").innerHTML="";var g=b.tab.title,h=b.tab.id;console.log("TAB SELECT triggered...");var f=$("#name-if-known-"+h).text();_a32307b6d2677ca4b4e58bf8a0dde5434227dbbd110666e6ac3e4ae831e4541e2e598fe14d494100(h,
"END",f);_b27140a17a379048c392e97a3c84c534b6c42bf9fbce66f99c809283638f344ecb3d50674ea64189();$("#thread-heading-name").text("");$("#thread-heading-actions").show();$("#inputsms-main").show();document.getElementById("send-button-main").onclick=function(){_gaq.push(["_trackEvent","WebApp","Send-Message-Reply-In-Thread-Click","",1]);var a;a=0==$("#mms-blob-id-holder").text().length;_78bc644dd686422751fd798a9e265aa13ca71c6e943361c31cb8fcbb01f15dddf9c5736bc54584a0(a)&&($("#send-button-main").css({background:"lightgrey",
color:"grey"}),$("#send-button-main").html("Sending\u2026"),$("#send-button-main").attr("disabled",!0),a?_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56("send_sms","reply-thread-window",g,h,f,"_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493"):_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56("send_mms","reply-thread-window",g,h,f,"_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493",
-999,$("#mms-blob-id-holder").text()))};document.getElementById("remote-phone-dial").onclick=function(){document.getElementById("remote-phone-dial").innerHTML="Calling from your phone...";_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56("make_automated_call","NA",g,h,f,"_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493")};document.getElementById("delete-all-from-sender").onclick=function(){confirm("Are you sure you want to delete ALL messages for "+
g+"?")&&_b3427d13ff23106acb958f9d1235f5a117f832617f204b124163beacdd4e9c3443206592ad6b8430(h)};$("#dest-num-reminder").empty();$("#dest-num-reminder").text(g)});console.log("5555");$("#sms-container").unblock();""==location.hash?setTimeout("$('#resultholder').tabs('select' , 0);",100):setTimeout("$(location.hash).click();",100)}
function _e043d400bc6b110b71338a92007c313905a664e23635ccff0b616d8ec9794689814d548ba7517031(){!0==confirm("This will send a text message via your phone to a phone # in the USA. Press OK to proceed.")&&_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56("send_sms","test-sms-send","+14158684689","8684689","MightyText Test #","_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493")}
function _c4bdbedbe4d9aadaed95b7d3b92532f3397f7e84f846615a0e309637364590bba615070583b88718(){}
function sssssss_a69aaa08fec5194e72db3779292d92e726185945e1cdf5c7ab385406da908ac62ce7c69779d5e8fe(a,b,c){var d=baseUrl+"/client?function=send&deviceType=ac2dm&action="+a+"&action_data="+b,e="";isCorsSupported||(d="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM",e="&wagdaedunn="+ckSharedGlobal,e+="&action="+a+"&action_data="+b);c&&(d+=c);console.log("send url for Custom C2DM is: "+d);$.ajax({url:d,global:!1,type:"POST",xhrFields:{withCredentials:!0},data:e,dataType:"text",success:function(b){console.log(b);
-1<b.search("sent to phone")?"push_phone_contacts_to_cloud"==a&&alert("Requested to refresh contacts from phone."):alert("C2DM error: "+b)},error:function(a,b,c){alert("Error in C2DM: "+c);alert("Error details: "+c.error)}})}function _ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f(){return Math.round((new Date).getTime()/1E3)}
function _a788f51bd511b6962caa84307a2eab53db0bc2faad707ee02cf3c3a30babb2e4259100a414e7ca67(a,b,c){"undefined"===typeof c&&(c=0);console.log("params: "+a+" ---- "+b+" --- "+c);var d=!0;"NO_CONTACTS_TOKEN"==a&&(d=!1);var e=baseUrl+"/api?function=GetDistinctMessageHeaders&CLIENT=CRX";console.log("calling AJAX - getting THREADS");$.ajax({url:e,global:!1,type:"GET",timeout:9E3,dataType:"jsonp",error:function(){1>c?_a788f51bd511b6962caa84307a2eab53db0bc2faad707ee02cf3c3a30babb2e4259100a414e7ca67(a,b,c+
1):_f7d2d0c3d299e55e2206ec0f86714bfff8a83935a07edef1babfc35a96daa8a5954b6774c9b4fe98(_46ac7ba195a5dcf861882f118aec028d8f27552d142765652f6f9656b2b2e569fcfae840ef95c4ba)},statusCode:{500:function(){alert("Error 500")}},success:function(c){calling_from_chrome_extension||$.unblockUI();"NO_CONTACTS_TOKEN"!=a&&_2eaec43984794b6ff83df317a24bf37a92bac44f92fd59462f807ce7e2f9e8059d51d1a1cc238132(a);c.user&&-1<c.user.search("user not logged in")&&(window.location=signInUrl);var e=0,f=0,k=0;$.each(c.messages,
function(b,c){0==c.phone_num_clean&&(c.phone_num="Unknown / Misc");var e="",g="img/silhouette.jpg",h="",n="src",j=8;$.browser.msie&&(j=1);e=!1;"NO_CONTACTS_TOKEN"==a&&(e=!0);if(e)j=$.jStorage.get(username_prefix_jstrg_purpose+"|PC_"+c.phone_num_clean,"no-jstorage-val-found"),"no-jstorage-val-found"==j?(j=_c4debf259b0be190e8c95175f376e0deed97aa426518c93cd5cab0faac6b0e136646a570bb0d0b91(c.phone_num_clean),console.log("NO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean+" ... now check array loaded from cloud")):
console.log("MATCHED! LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),void 0==j?(e=c.phone_num,console.log("Phone Contacts NOT MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...NO CONTACT MATCH....for full num: "+c.phone_num)):(e=j.contactName,console.log("Phone Contacts YES MATCH: Thread phone_num_clean= "+c.phone_num_clean+"...Contact Match: "+j.contactName+"..."+j.phoneNum),j=$.jStorage.get(username_prefix_jstrg_purpose+"|PH_PIC_"+c.phone_num_clean,"no-jstorage-val-found"),
"no-jstorage-val-found"==j?(_285fadf985b43055f26836305f3324e242379f23904addefc74be7d6562a127a60c1b3c61ab17893(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,99999),console.log("NO PHOTO LOCAL JSTORAGE MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean)):(console.log("LOCAL PHOTO JSTORAGE ENTRY MATCH FOR PHONE_NUM_CLEAN: "+c.phone_num_clean),console.log("Now check if actual binary image available in JSTORAGE"),2<j.contactThumbnailBinary.length?(console.log("BINARY IMAGE in local cache for "+
c.phone_num_clean),globalPHONEContactsRefreshCacheQueue.push([c.phone_num_clean,"data:image/jpeg;base64,"+j.contactThumbnailBinary])):(console.log("NO actual photo in local cache for: "+c.phone_num_clean),console.log("Now, see if C2DM request for this image was recent"),j.ts_last_c2dm_pic_request&&(j=_ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f()-j.ts_last_c2dm_pic_request,console.log(j+"s since last c2dm try for "+c.phone_num_clean),180>j&&(console.log("checking for image again from central MC"),
_285fadf985b43055f26836305f3324e242379f23904addefc74be7d6562a127a60c1b3c61ab17893(c.phone_num_clean,"#thumbnail-if-known-"+c.phone_num_clean,j))))));else{var q=[];0!=c.phone_num_clean&&(q=$.jStorage.get(c.phone_num_clean,"no-jstorage-val-found"));q.name?(e=q.name,console.log(c.phone_num_clean+" - Local Storage contact match to name: "+e),""!=q.thumbnail_image_google_base_url&&(g=q.thumbnail_image_google_base_url+"&oauth_token="+a,k++,k<j?(h="g-thumb-image-load-now",n="src"):(h="g-thumb-image-load-later",
n="srcloadlater")),j=_ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f()-q.time_stored,21600<j&&d&&(console.log("should refresh local contact cache for "+c.phone_num_clean+" -- seconds old: "+j),globalContactsRefreshCacheQueue.push(c.phone_num_clean))):(console.log("no Local jStorage entry found. Now, check for current Oauth contacts token, and call globalContactsRefreshCacheQueue for "+c.phone_num+" .... "+c.phone_num_clean),e=c.phone_num,d&&globalContactsRefreshCacheQueue.push(c.phone_num_clean))}calling_from_chrome_extension||
(j='<li id="tab'+b+"-"+c.phone_num_clean+'">',j+='<a title="'+c.phone_num+'" id="'+c.phone_num_clean+'" href="#sms-thread-content"> <span class="tab-text" style="float:left"><span id="name-if-known-'+c.phone_num_clean+'" class="threadnamenumber">'+e+'</span><span style="font-size:11px;font-weight:normal"> (<span id="thread-count-live-updated-'+c.phone_num_clean+'">'+c.count+'</span>)<br><span id="timestamp-last-msg">'+_3da4048ffc556b9d6c7ae43f64d7eed7675ef9843b38b789da2f768c8e9ad5c498ca6be82ff9febdDisplayPurposes(c.ts_server,
!0)+"</span></span></span>",j+='<img id="thumbnail-if-known-'+c.phone_num_clean+'" class="'+h+'" style="margin-right:0px;float:right" width=45 height=45 '+n+'="'+g+'"> ',document.getElementById("tabs-phone-threads").innerHTML+=j,document.getElementById("tabs-phone-threads").innerHTML+="</a></li>",f+=c.count)});setTimeout(_8182fc4d832fb8c360bdc4fbc0bf57b9d21fc66b3d44549c5c406faa239dc18c734805c0013b07da,5E3);_a401c3af10d0a7bfefba3cbb879ae175daaf00f3f23cee539fa33a304d4f283110a6ca1d524d7030();"NO_CONTACTS_TOKEN"!=
a&&(global_oauth_contacts_token=a,setTimeout(_b9cc0a8c51d81f5ef1a75ad2fa70f5482ad0e3e66d4b7b1893b3f66f0a5dbebfeb74387e5b11c1d5,1E3));setTimeout(_7c37709a74b72bcd3edf701b84007343231d10d98b20dae3cf37d54b740850f4fa7290380e04db2a,2E3);e=c.messages.length;_gaq.push(["_trackEvent","WebApp","Count-Num-Threads-Pulled","",e]);_gaq.push(["_trackEvent","WebApp","Count-Num-Total-Messages-Pulled-All-Threads","",f]);calling_from_chrome_extension||(generate_tabs(-1,b),$("#resultholder").show(),$.unblockUI())}})}
function _8182fc4d832fb8c360bdc4fbc0bf57b9d21fc66b3d44549c5c406faa239dc18c734805c0013b07da(){for(var a="";0<globalQueueContactImagesToFetch.length;)a+=globalQueueContactImagesToFetch.shift(),0<globalQueueContactImagesToFetch.length&&(a+="|");0<a.length&&_a69aaa08fec5194e72db3779292d92e726185945e1cdf5c7ab385406da908ac62ce7c69779d5e8fe("push_phone_contact_photos_to_cloud",a)}
function _b9cc0a8c51d81f5ef1a75ad2fa70f5482ad0e3e66d4b7b1893b3f66f0a5dbebfeb74387e5b11c1d5(){var a=globalContactsRefreshCacheQueue.shift();console.log("SHIFT OFF ARRAY: checking google contacts api for "+a);_1a5270e66ed4ca6b0227a4ebf6a959157221262be6aa6aeadd2753e78b30084ef65fd32073251595(a,global_oauth_contacts_token,!0);0<globalContactsRefreshCacheQueue.length&&setTimeout(_b9cc0a8c51d81f5ef1a75ad2fa70f5482ad0e3e66d4b7b1893b3f66f0a5dbebfeb74387e5b11c1d5,300)}
function _a401c3af10d0a7bfefba3cbb879ae175daaf00f3f23cee539fa33a304d4f283110a6ca1d524d7030(){if(1>globalPHONEContactsRefreshCacheQueue.length)return!1;var a=globalPHONEContactsRefreshCacheQueue.shift(),b=a[1];$("#thumbnail-if-known-"+a[0]).attr("src",b);0<globalPHONEContactsRefreshCacheQueue.length&&setTimeout(_a401c3af10d0a7bfefba3cbb879ae175daaf00f3f23cee539fa33a304d4f283110a6ca1d524d7030,100)}
function _285fadf985b43055f26836305f3324e242379f23904addefc74be7d6562a127a60c1b3c61ab17893(a,b,c){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContactPhotos&phone_num_clean="+a,global:!1,type:"GET",dataType:"jsonp",jsonpCallback:"servletReturns"+a,success:function(d){if("0"!=d.phone_contact_photo_status&&0<d.phone_contact_photo_status.length)$(b).attr("src","data:image/jpeg;base64,"+d.phone_contact_photo_status),$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status});
else if(0==d.phone_contact_photo_status.length){console.log("photo was previously requested and sent as blank to MT system for phone num: "+a);var e;$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status},{TTL:6048E5})}else 28800<c&&5>globalQueueContactImagesToFetch.length&&(globalQueueContactImagesToFetch.unshift(a),e=1728E5,$.jStorage.set(username_prefix_jstrg_purpose+"|PH_PIC_"+a,{contactThumbnailBinary:d.phone_contact_photo_status,ts_last_c2dm_pic_request:_ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f()},
{TTL:e}))}})}function _27291f605844416b650158f21f9359a0bfca14bc707ae6b63b01b74f174255b875d123bce89929a7(){$.ajax({url:baseUrl+"/phonecontact?function=getPhoneContacts",global:!1,type:"GET",dataType:"jsonp",jsonpCallback:"servletReturns",success:function(a){_df1b1e8a938d8a245270352fb20a81c765a55fbadaa09466e1b09be0415f19b10232b7fd86794d01(a)}})}
function _c4debf259b0be190e8c95175f376e0deed97aa426518c93cd5cab0faac6b0e136646a570bb0d0b91(a){var b;$.each(contactsFromPhoneGlobal,function(c,d){if(a==d.phoneNumClean)return b=d,$.jStorage.set(username_prefix_jstrg_purpose+"|PC_"+a,{contactName:d.contactName,phoneNum:d.phoneNum,phoneNumType:d.phoneNumType}),!1});return b}
function _df1b1e8a938d8a245270352fb20a81c765a55fbadaa09466e1b09be0415f19b10232b7fd86794d01(a){if(0==a.contacts_status)return console.warn("No Phone contacts in cloud for this user"),!1;$.each(a,function(a,c){contactid=c.contactId;contactName=c.displayName;$.each(c.phoneList,function(a,b){phoneNumType=b.type;phoneNum=b.phoneNumber;cleanPhoneNum=_1190522a55ffda492c5f8e7d977692b124398d32a525a7df3d61c9dd8283a9afef3d5dc770807788(phoneNum);contactsFromPhoneGlobal.push({phoneNum:phoneNum,phoneNumType:phoneNumType,
phoneNumClean:cleanPhoneNum,contactName:contactName})})})}function _7c37709a74b72bcd3edf701b84007343231d10d98b20dae3cf37d54b740850f4fa7290380e04db2a(){var a=$(".g-thumb-image-load-later").first();a&&(a.attr({src:a.attr("srcloadlater")}),a.removeClass("g-thumb-image-load-later"),a.addClass("g-thumb-image-LOADED-later-DONE"),setTimeout(_7c37709a74b72bcd3edf701b84007343231d10d98b20dae3cf37d54b740850f4fa7290380e04db2a,300))}
function _9c3a4a2e045bdfba5c739b7b66814097c9c82d3908055a00839dfcc34278d7c83dd4049947d3994b(){console.log("Forcing  contacts token refresh...");$.ajax({url:baseUrl+"/contact?function=revokeGoogleContactsToken",global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontactsrevoke",error:function(a,b,c){alert("** Error in revoking google contacts token: "+c)},success:function(){$.jStorage.flush();alert("Successfully Unlinked from Google Contacts");window.location.reload()}})}
function _015b1299aa6db8e3b7c8c5b3d062a1a3a6c538f7e745353b490276e9d554c341f1a0c39f988ace15(a){console.log("*** NEW CONTACTS TOKEN REFRESH!");$.ajax({url:baseUrl+"/contact?function=refreshGoogleContactsAccessToken",global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontactsforce",error:function(a,c,d){console.log("** Error in refresh_google_contacts_access_token: "+d);_a788f51bd511b6962caa84307a2eab53db0bc2faad707ee02cf3c3a30babb2e4259100a414e7ca67("NO_CONTACTS_TOKEN")},success:function(b){console.log("in force contacts token refresh -- success!");
console.log("get_new_access_token_value is: "+b);calling_from_chrome_extension&&$.jStorage.set("google_contacts_token",{contacts_token_value:b,time_captured:_ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f()});-1<b.search("error")?_a788f51bd511b6962caa84307a2eab53db0bc2faad707ee02cf3c3a30babb2e4259100a414e7ca67("NO_CONTACTS_TOKEN",a):_a788f51bd511b6962caa84307a2eab53db0bc2faad707ee02cf3c3a30babb2e4259100a414e7ca67(b,a)}})}
function _2eaec43984794b6ff83df317a24bf37a92bac44f92fd59462f807ce7e2f9e8059d51d1a1cc238132(a){var b="https://www.google.com/m8/feeds/contacts/default/full?alt=json&v=3.0&max-results=6000&oauth_token="+a;localGoogleContactsFeed="NOTHING-STORED";"NOTHING-STORED"==localGoogleContactsFeed?(console.log("**CONTACTS: No local contacts TOKEN stored; calling google Contacts feed using stored token"),$.ajax({url:b,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts",success:function(b){console.log(b);
_4231e18647b991ffeb71ebe39384e9dc6f9523df5b09cfeadfc6032f5a0e47fa42620261921a1ddc(b,a)}})):_4231e18647b991ffeb71ebe39384e9dc6f9523df5b09cfeadfc6032f5a0e47fa42620261921a1ddc(localGoogleContactsFeed,a)}
function _1a5270e66ed4ca6b0227a4ebf6a959157221262be6aa6aeadd2753e78b30084ef65fd32073251595(a,b,c){console.log("in getSingleNumberContactsFeeeed");if(0==a)return 1;var d="https://www.google.com/m8/feeds/contacts/default/full?q="+a+"&alt=json&v=3.0&max-results=2000&oauth_token="+b;console.log(d);$.ajax({url:d,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"gcontacts"+a,success:function(d){console.log("In GetSingleNumberContacts Feed. . .");console.log(d);0<d.feed.openSearch$totalResults.$t&&_bf96f444209ce428ec04078ee7c9c8e3c81fdbb4e06febb5b929954ecc35ca0c5f3cb457072257fb(d,
b,a,c)}});return 1}
function _27c940f95292388021a0ee0f20e08aca2da62cefa0c9ef6519bbd34f40aac5a894e629eb99d33784(a){a=a.feed.entry;for(var b=0;b<a.length;b++){var c=a[b];console.log("name = "+c.getTitle().getText());for(var d=c.getEmailAddresses(),e=0;e<d.length;e++){var g=d[e].getAddress();console.log("email = "+g)}c=c.getPhoneNumbers();if(0==c.length)console.log("phone number = N/A");else for(e=0;e<c.length;e++)d=c[e].getValue()||"N/A",console.log("phone number = "+d)}0==a.length&&console.log("no contacts are found ")}
function _4231e18647b991ffeb71ebe39384e9dc6f9523df5b09cfeadfc6032f5a0e47fa42620261921a1ddc(a){contacts_bkg_page=[];contacts_autocomplete_per_unique_phone_num=[];googleContactsArray=[];for(var b="",c=0,d;d=a.feed.entry[c];c++){var e={name:d.title.$t,id:d.id.$t,emails:[],phonenums:[]};e.name||(e.name=e.emails[0]||"<Unknown>");if(d.link&&d.gd$phoneNumber)for(var g=d.link,h=0,f;h<g.length;h++)f=g[h],"image/*"==f.type&&void 0!=f.gd$etag&&(b=f.href);if(d.gd$phoneNumber){g=d.gd$phoneNumber;for(h=0;h<g.length;h++){f=
g[h];e.phonenums.push(f.$t);googleContactsArray.push({name:e.name,phone_number_full:f.$t,thumbnail:b});var k=f.rel,m="";void 0===k?m="Other":0<k.search("mobile")?m="Mobile":0<k.search("work")?m="Work":0<k.search("home")&&(m="Home");contacts_autocomplete_per_unique_phone_num.push({label:e.name+" "+f.$t+" ("+m+")",value:f.$t,contact_name:e.name,type_home_mobile:f.rel,g_contact_id:d.id?d.id:""})}}d.gd$phoneNumber&&contacts_bkg_page.push(e)}console.log("*** Done parsing google contacts feed*****");console.log("num entries in googleContactsArray: "+
googleContactsArray.length)}var buildLongInfoString="";
function _bf96f444209ce428ec04078ee7c9c8e3c81fdbb4e06febb5b929954ecc35ca0c5f3cb457072257fb(a,b,c,d){console.log("number ending, to match, is: "+c);var e=_e1da2a0fda25ee1865940678103797062da7cba55296c37edc970c31de7c9ec1667e4bd363cec4e8(c,7);console.log("number ending, to match, ZERO PADDED to 7 digits is: "+e);for(var g="",h="",f=!1,k=a.feed.entry.length,m=0;m<k;m++){var p=a.feed.entry[m],s=p.title.$t;if(p.link&&p.gd$phoneNumber){console.log(p.gd$phoneNumber);console.log("For number_ending="+c+' -- in entry: Link and PhoneNumber, now traverse "links" and check for image/* and gd$etag\u2026.');
for(var r=p.gd$phoneNumber,l=0,n;l<r.length;l++){n=r[l];var j=_1190522a55ffda492c5f8e7d977692b124398d32a525a7df3d61c9dd8283a9afef3d5dc770807788(n.$t),q=j.substring(j.length-7);console.log("For zero padded number_ending="+e+"..Phone Number in Google Contacts is: "+n.$t);console.log("Sanitized Google Contact Phone Number is: "+j);console.log("last 7 digits of  sanitized g contact # is: "+q);if(q==e){f=!0;""==h&&(h=s);j=p.link;for(n=0;n<j.length;n++)console.log("linklist index is  "+n),q=j[n],"image/*"==
q.type&&void 0!=q.gd$etag&&(console.log('found "image" and gd$etag entry in links list for contact: '+s),g=q.href,console.log("**** Single Num - GOT IMAGE FOR: "+s+" --\x3e "+g+"&oauth_token="+b))}}}else if(p.gd$phoneNumber){console.log("For "+c+" -- At least one Phone Number found in this entry..");p=p.gd$phoneNumber;for(n=0;n<p.length;n++)console.log("----------------------------------------")}}f?(console.log("** Found explicit phone number match! -- Best info --- "+c+" -- Name: "+h+" -- Best Image: "+
g),newBestGoogleContactsArray.push({phone_num_clean:c,name:h,thumbnail_image:g}),$.jStorage.set(c,{name:h,thumbnail_image_google_base_url:g,time_stored:_ddb9ff1f9943b7e2ec9dc20e0806319b1a79a2c5416a343fc51e134683987116c6dfb9322a4b3a6f()}),a="",e="#name-if-known-"+c,f="#thumbnail-if-known-"+c,k=$(".ui-tabs-selected a").attr("id"),a=""==g?"img/silhouette.jpg":g+"&oauth_token="+b,d&&($(e).text(h),c==k&&$("#thread-heading-name").text(h),$(f).attr("src",a))):console.log("No contact match found based on # ending with: "+
c)}
function _12b95204c684233b50f08bf65fe7996fe310b693929c010c8a4ba30eadae4de4da7c955f597ef04d(a){document.getElementById("top-notif-bar").innerHTML="";_23a72b4b1452794c76a05bc6804f1ad8aaf421813a425331cd8500cd360b87ec760ca2e0bd6ddd2b("Current google_login_status is "+google_login_status);_23a72b4b1452794c76a05bc6804f1ad8aaf421813a425331cd8500cd360b87ec760ca2e0bd6ddd2b("Current login_and_beta_ready is "+login_and_beta_ready);selected_tab=$("#resultholder").tabs("option","selected");void 0!=selected_tab.length&&(selected_tab=
0);void 0!=a&&(document.getElementById("msg").innerHTML=a)}function _485f4c9ec72a4dfb2171825d47ad41b66e3bc6b1cba580c17892bf89f0f5ea48d0a65899e98baa38(a){a="#thread-count-live-updated-"+a;$(a).text(parseInt($(a).text())+1);$(a).hide().fadeIn(600);$(a).siblings("#timestamp-last-msg").text(_3da4048ffc556b9d6c7ae43f64d7eed7675ef9843b38b789da2f768c8e9ad5c498ca6be82ff9febdDisplayPurposes(new Date,!1))}
function _aaf674997042f9efaf2742f9bba0e8eb356b590081f910b07adb8fbc2e1a6bddd5612d9a020f3fc4(a){a=jQuery.parseJSON(a);if(void 0!==a.new_content){if(a=a.new_content,!(-1<a.body.search("CAPI_HEALTH_CHECK")||-1<a.body.search("USER_UPDATED_SETTINGS_IN_WEBAPP"))){var b=$(".ui-tabs-selected a").attr("id");a.phone_num_clean==b&&(b="",61==a.inbox_outbox&&(b="sms-reply"),$("#sms-thread-content").append('<li id="sms-line-item-msgid-'+a.id+'" class="sms-line-item JUST-PUSHED-FROM-CLOUD '+b+'"><div id="sms-body-msgid-'+
a.id+'" class="sms-body" >'+_38e80d3a7b715ac99cb772ade1dd66274a88d11078bff51c24429e5739d72949894ec8f73ba94217(a.body)+'</div>  <span class="sms-time" id="unknown">(just now...)</span></li>'),$("#sms-body-msgid-"+a.id).show("highlight",{color:"#F9EEC0"},3E3),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()));if(61!=a.inbox_outbox&&84!=a.type&&85!=a.type){var c="",d="";10==a.type?(c="Message from ",d="'"+a.body+"'"):11==a.type?void 0!==a.mms_object_key?(c="MMS from ",d="'"+a.body+
"' (MMS Downloaded)"):(c="MMS from ",d="Image Downloading on Phone..."):80==a.type?c="Incoming Call from ":81==a.type&&(c="Missed Call from ");d=_38e80d3a7b715ac99cb772ade1dd66274a88d11078bff51c24429e5739d72949894ec8f73ba94217(d);b=[];0!=a.phone_num_clean&&(b=$.jStorage.get(a.phone_num_clean,"no-jstorage-val-found"));var e="",e=b.name?b.name:a.phone_num;$("#msg").fadeOut(500,function(){$(this).html("<B>"+c+e+': </B><span style="font-weight:normal">'+d+"</span>").fadeIn(1E3)});var g="#"+a.phone_num_clean;
objNewSettings&&0==objNewSettings.notif_toggle_on_off?(console.log("*** DONT POPUP NOTIFICATION - USER PREFERENCE"),b=!1):b=!0;if(window.webkitNotifications&&"Chrome"!=BrowserDetect.browser&&b){var h=3E4,f="";objNewSettings&&objNewSettings.notif_dismiss_time&&(h=1E3*objNewSettings.notif_dismiss_time,console.log("setting notif_dismissal_time to: "+h));var f=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click to see message...":d,k=window.webkitNotifications.createNotification("http://icons.iconarchive.com/icons/kyo-tux/aeon/256/Misc-Buddy-Blue-icon.png",
c+e,f);k.ondisplay=function(){inWebAppGlobalNotifArray.push(k);setTimeout("_f2ac03f649b67f06cd91845cd33d302c06378eba0ad0144e12526132b8bd147b23f0b12e971796f6();",h)};k.onclick=function(){window.focus();$(g).click();this.cancel()};k.show()}!window.webkitNotifications&&b&&(f=objNewSettings&&1==objNewSettings.notif_content&&10==a.type?"Click OK to see message...":d,alert(c+e+": "+f),!1==_4cd95c22d8038a604f7b4512bf99d1d802fbd09330b215f531f009f2e6967db02e58354f71d44dc2(1)&&$(g).click())}if(10==a.type||
11==a.type)_485f4c9ec72a4dfb2171825d47ad41b66e3bc6b1cba580c17892bf89f0f5ea48d0a65899e98baa38(a.phone_num_clean),_7748eee5b0090d4578d96130d8e215a12d2be7cd6249b4fa89fe94e6d65d52424325137b5c761875(a.phone_num_clean,a.phone_num)}}else void 0!==a.ack_processed?(b=a.ack_processed,a="message-status-text-msgid-"+b.id,b="outbox-message-msgid-"+b.id,null!=document.getElementById(a)&&(document.getElementById(a).innerHTML='<B>Phone Sent Message</B> <img style="margin-top:5px" src="checkmark-yes.png">'),null!=
document.getElementById(b)&&(document.getElementById(b).innerHTML='<B>Phone Sent</B> <img src="checkmark-yes.png">')):console.log("unknown incoming CAPI content")}
function _1190522a55ffda492c5f8e7d977692b124398d32a525a7df3d61c9dd8283a9afef3d5dc770807788(a,b){for(;-1<a.search("[-]");)a=a.replace("-","");for(;-1<a.search("[ ]");)a=a.replace(" ","");for(;-1<a.search("[(]");)a=a.replace("(","");for(;-1<a.search("[)]");)a=a.replace(")","");for(;-1<a.search("[.]");)a=a.replace(".","");for(;-1<a.search("[/]");)a=a.replace("/","");for(;-1<a.search("[+]");)a=a.replace("+","");return a=!b&&7>a.length?_e1da2a0fda25ee1865940678103797062da7cba55296c37edc970c31de7c9ec1667e4bd363cec4e8(a,
7):a.substring(a.length-7)}function _2e9b38ec8821a6434ca7d2611777d76c3447f06e15c86cd10f5b614e41a6213afcb93cf650ed97b9(){$("#resultholder").tabs("select",-1);$(".ui-tabs-selected").removeClass("ui-state-active").removeClass("ui-tabs-selected")}
function _1f0c2be374a0153f49abdd71ed8da54ea25570df108d85109b999c28fc94fb586c333ad60df758b4(){_gaq.push(["_trackEvent","WebApp","Compose-New-Msg-Click","WebAppPageView",1]);if(!$("#settingsPane")[0]&&_4cd95c22d8038a604f7b4512bf99d1d802fbd09330b215f531f009f2e6967db02e58354f71d44dc2())return!1;_2e9b38ec8821a6434ca7d2611777d76c3447f06e15c86cd10f5b614e41a6213afcb93cf650ed97b9();$("#sms-container").css("height","auto");document.getElementById("sms-container").innerHTML='<div id="compose-single-text" style="text-align:left;clear:both;font-size:18px;padding:5px;padding-left:9px;border-left:1px solid #ccc;border-bottom:1px solid #ccc;border-right:1px solid #ccc;border-radius:10px">';
contact_box_prompt="Start typing a name or number...";document.getElementById("compose-single-text").innerHTML+='<h3 style="font-size:21px;margin-bottom:15px;margin-top:10px;padding-bottom:5px;border-bottom: 1px solid rgba(0,0,0,.1)"><b>New Message</b></h3><br><p><B>Send To:</B>  <span style="font-size:12px;color:#3F8CD9;margin-left:10px">(Up to 3 recipients) <a style="font-size:12px;color:#E60;float:right" href="#" onclick="alert(\'Please Note: Your carrier will count an SMS for each recipient. As a reminder, MightyText sends SMS via your phone.\');">important note</a></span></p>';
document.getElementById("compose-single-text").innerHTML+='<div id="friends" style="color:darkgrey; border:1px solid #CCC;margin:0px;margin-right:40px;padding:8px;font-size:15px;height:60px"></div>';document.getElementById("friends").innerHTML+='<input id="compose-number" type="text" size=20 name="compose-number" style="border:none;" />';document.getElementById("compose-single-text").innerHTML+="<br><p><B>Message:</B></p>";document.getElementById("compose-single-text").innerHTML+='<div id="single-text-elements">';
document.getElementById("compose-single-text").innerHTML+='<textarea id="send-one-text" value="starting val" onfocus="document.getElementById(\'error-text-content-single-text\').innerHTML=\'\';" style="float:left;height:70px;max-height:80px;width:400px;border:1px solid #CCC;margin:0px;padding:5px;font-size:16px;"></textarea>';document.getElementById("compose-single-text").innerHTML+='<span id="holder-adjacent-sendbox-single-text" style="float:left"><button id="send-button-single-text" style="font-size:14px;margin:0px;padding:7px;margin-left:18px;cclear:both" onclick="_c5cf00bbdf61d0875c69e0797e58c9893eda0b78204c466e27c04b48f34fb26feb19a8f7c8aac8dd();"> Send</button><br><br><span style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;font-family:arial;margin-left:20px" id="charsLeft-one-text"></span></span>';
document.getElementById("compose-single-text").innerHTML+='<span id="mms-canvas-single-text" style="">'+_e7902a60afb241fab80e98f92f9501be457a318ec1eca88e00db81e17c7504b372b5097f6008ab48();document.getElementById("compose-single-text").innerHTML+="</span>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+="<br><br>";document.getElementById("compose-single-text").innerHTML+="</div>";document.getElementById("compose-single-text").innerHTML+=
'<br><div id="single-text-texts" style="font-size:14px"></div>';document.getElementById("compose-single-text").innerHTML+='<br><div id="error-text-content-single-text" style="font-weight:bold;color:red;font-size:14px"></div>';$("#compose-number").focus();objNewSettings&&0==objNewSettings.enter_to_send||$("#send-one-text").unbind("keydown").keydown(function(a){13==a.keyCode&&!a.shiftKey&&(a.preventDefault(),$("#send-one-text").blur(),$("#send-button-single-text").click())});$("#send-one-text").NobleCount("#charsLeft-one-text");
$("#send-one-text").click(function(){0<$("#compose-number").val().length&&_90376e9d3cb5d6642e71ba73271514891b9ee479973c0639d5584399e4b4dc7ebb9d861cfb3ce4e4()});$("#compose-number").delegate("","keydown",function(a){8==a.keyCode&&1>$("#compose-number").val().length&&$(this).prev("span").remove();188==a.keyCode&&0<$("#compose-number").val().length&&_90376e9d3cb5d6642e71ba73271514891b9ee479973c0639d5584399e4b4dc7ebb9d861cfb3ce4e4()});$(function(){$("#compose-number").bind("keydown",function(a){a.keyCode===
$.ui.keyCode.TAB&&($(this).data("autocomplete").menu.active?a.preventDefault():_90376e9d3cb5d6642e71ba73271514891b9ee479973c0639d5584399e4b4dc7ebb9d861cfb3ce4e4())});$("#compose-number").autocomplete({source:contacts_autocomplete_per_unique_phone_num,autoFocus:!0,delay:100,open:function(){$(".ui-menu").css({"z-index":"9999"});$(".ui-menu").css({border:"1px solid #c0c0c0"});_8eb895eaefa7110556d6eb599915860c1c49743947a91feb530b24c5cacac2d335c9f3515cef79b6()},select:function(a,b){if(_8eb895eaefa7110556d6eb599915860c1c49743947a91feb530b24c5cacac2d335c9f3515cef79b6()){var c;
c=0<b.item.contact_name.length?'<div id="single-compose-contact-name" style="font-size:14px">'+b.item.contact_name+'</div><span id="single-compose-target-phone-num" style="border:none;font-size:12px">'+b.item.value+"</span>":b.item.value;$("<span class='contact-bubble'>").html(c).insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}},change:function(){}});$("#compose-number").autocomplete("widget").addClass("compose-single-text-autocomplete-box");$("#friends").click(function(){$("#compose-number").focus()});
$(".remove",document.getElementById("friends")).live("click",function(){$(this).parent().remove();0===$("#friends span").length&&$("#compose-number").css("top",0)})})}function _8eb895eaefa7110556d6eb599915860c1c49743947a91feb530b24c5cacac2d335c9f3515cef79b6(){return 2<$(".contact-bubble").length?($("#compose-number").val(""),$("#compose-number").autocomplete("close"),alert("You already have selected 3 recipients."),!1):!0}
function _90376e9d3cb5d6642e71ba73271514891b9ee479973c0639d5584399e4b4dc7ebb9d861cfb3ce4e4(){if(!(1>$("#compose-number").val().length)&&_8eb895eaefa7110556d6eb599915860c1c49743947a91feb530b24c5cacac2d335c9f3515cef79b6()){var a;a=$("#compose-number").val().replace(",","");a=a.replace("\t","");if(_c45c824e9d5dd02577162f9bf666e7d26997497ce6ddb6c8f5f6018c242b644060a650e9d0a2060a(a)){a='<span id="single-compose-target-phone-num" style="border:none">'+a+"</span>";var b=$("<span class='contact-bubble'>").html(a);
$("<a>").addClass("remove").attr({href:"javascript:",title:"Remove "+a}).text("x").appendTo(b);b.insertBefore("#compose-number");setTimeout("$('#compose-number').val('');",1)}else alert(a+" is not a valid phone number"),$("#compose-number").val($("#compose-number").val().replace("\t","")),setTimeout("$('#compose-number').focus();",50)}}
function _602856952e1d059e9e9997fb77126201d8422c5678ab44e2518c62ffc04ad044f4a07f1369a59523(){var a=!1,b=0,c=[];$("#friends .contact-bubble").each(function(){$(this);var a=$(this).children("#single-compose-target-phone-num").text();_c45c824e9d5dd02577162f9bf666e7d26997497ce6ddb6c8f5f6018c242b644060a650e9d0a2060a(a)?(b++,c.push(a)):alert(a+" is not in a valid phone number.")});$("#friends input").each(function(){var d=$(this).val();0<d.length&&(b++,_c45c824e9d5dd02577162f9bf666e7d26997497ce6ddb6c8f5f6018c242b644060a650e9d0a2060a(d)?
c.push(d):(alert(d+" is not a valid number"),a=!0))});0==b?alert("No recipients entered"):a||_914ffa90d53dbc36f73b15bb7f0ebdf67524353f130170f5c2232327c86e1e4cc943f2d16048b98f(c,b)}
function _914ffa90d53dbc36f73b15bb7f0ebdf67524353f130170f5c2232327c86e1e4cc943f2d16048b98f(a,b){_gaq.push(["_trackEvent","WebApp","Send-Message-Compose-New-Window-Click","",b]);$("#msg").empty();$("#send-button-single-text").css({background:"lightgrey",color:"grey"});$("#send-button-single-text").html("Sending...");$("#send-button-single-text").attr("disabled",!0);var c=0==$("#mms-blob-id-holder").text().length;$(a).each(function(a,b){var g=_1190522a55ffda492c5f8e7d977692b124398d32a525a7df3d61c9dd8283a9afef3d5dc770807788(b,
!0);c?_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56("send_sms","single-compose",b,g,b,_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493,a):_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56("send_mms","single-compose",b,11111,b,"_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493",a,$("#mms-blob-id-holder").text())})}
function _7e3623d5a25b8b52e57af0e2c3cf0b6efd72273255cc38d304d08bae3057b24632340f0f7fb29778(a){a=_1190522a55ffda492c5f8e7d977692b124398d32a525a7df3d61c9dd8283a9afef3d5dc770807788(a);return a.substring(a.length-7)}function _c45c824e9d5dd02577162f9bf666e7d26997497ce6ddb6c8f5f6018c242b644060a650e9d0a2060a(a){if(""!=a){for(i=0;i<a.length;i++){var b=a.charAt(i);if(0>"+- 1234567890()/][.".indexOf(b))return!1}return!0}return!1}
function _ced360f6bdaf62dee9cdda4247d5f11fc14ec467976ca5047eb58b760068a0fb84a9b57cdca4529e(){$.ajax({type:"GET",url:baseUrl+"/getJson?function=getChannelTokenForWebApp&client=CRX_WEBAPP&mins=120",dataType:"jsonp",jsonpCallback:"capiwagda",success:function(a){console.log("Response from cloud after channel attempt (should have valid_token prepend): "+a);if(0>a.search("valid_token:"))console.log("No valid_token prepend found from Channel API!");else{a=a.replace("valid_token:","");var b=new goog.appengine.Channel(a);
console.log(b);b=b.open();b.onopen=function(){global_time_last_CAPI_msg_received_webapp=new Date;console.log("Channel Opened via Channel API with token: "+a);console.log("Current time - when channel API new socket is opened : "+Date());_gaq.push(["_trackEvent","Background","ChannelAPI-Open-Socket","",1])};b.onmessage=function(a){_gaq.push(["_trackEvent","Background","ChannelAPI-Message-Received","",1]);global_time_last_CAPI_msg_received_webapp=new Date;console.log("**** CHANNEL SOCKET ONMESSAGE *** ");
console.log("Message arrived via CAPI= "+a.data);_aaf674997042f9efaf2742f9bba0e8eb356b590081f910b07adb8fbc2e1a6bddd5612d9a020f3fc4(a.data)};b.onerror=function(){console.log("!!!!!!!!!!!!! TOKEN GONE (via onerror callback)!!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONERROR","",1])};b.onclose=function(){console.log("!!!!!!!!!!!!! TOKEN GONE (via onclose callback) !!!!!!!!!!!!");_gaq.push(["_trackEvent","Background","ChannelAPI-Socket-ONCLOSE","",1]);setTimeout("_ced360f6bdaf62dee9cdda4247d5f11fc14ec467976ca5047eb58b760068a0fb84a9b57cdca4529e();",
300);console.log("------\x3e get a new Channel Token")}}}}).responseText}function _7c742a7774176cc3d88653f82f33dbe8f8979394e4f32d4938ac76e4dbe2ed0e980dd7d01ed394c2(){_afcdcc32ed8e79a02f109d33032971188e148763c8566e7b1826ee557cbc07695dec489858f75f6a();alert("Welcome to the MightyText Web App!");window.location.reload()}
function _fef5d87afd66216ffa54826e293676b035b2f7f75055890b91d56dedf8c181acb9aace89af9bfbe6(a){$.ajax({url:"uservoice_sso.php",global:!1,type:"POST",timeout:1E4,data:"useremail="+a,error:function(){},success:function(a){if(0<=a.indexOf("success")){uvOptions={sso:a.split(/\{([^}]+)\}/)[1]};a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/mJ2EXFuxIoJI4z24dEDKTA.js";var c=document.getElementsByTagName("script")[0];
c.parentNode.insertBefore(a,c)}else console.log("proper sso token not retrieved from uservoice helper php script")}})}function promptUserForNewContactsOauthFlow(){document.getElementById("one-off-notify-user").innerHTML='<a style="font-size:14px;color:cyan"  href="'+newContactsOAuthURL+'" onclick="">Sync with Google Contacts</a>to see names'}
function _9364c95d7bd822a4751ea55b54fd880c7ef7c89f753f822ee660e26b1e43086a823087cf937b94c8(){document.getElementById("user-actions").innerHTML="";document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="positive button" onclick="if(_6e72d6a14baec8319919163ce9043def03491abab3f8bbc602e3a34f7cbc8a3d97e1393a135562fc()) {document.getElementById(\'msg\').innerHTML=\'\';_1f0c2be374a0153f49abdd71ed8da54ea25570df108d85109b999c28fc94fb586c333ad60df758b4();}"> <span class="pen icon"></span>Compose New</button>';
document.getElementById("user-actions").innerHTML+='<button style="font-size:1.1em" class="button" onclick="_817d2bbe953b81f2499f8716e45a82b30fc76d07b5eb5c6f9b4db25c26358ae5851ba6f6dd37cc80();"><span class="reload icon"></span>Reload</button>';_94465b616bbb8d1816a4188b8f161c664325c306cac6f9be4458fc3b0106f31eaeee90c7c67209ef()}
function _6e72d6a14baec8319919163ce9043def03491abab3f8bbc602e3a34f7cbc8a3d97e1393a135562fc(){if(google_login_status)return!0;document.getElementById("msg").innerHTML='<span style="color:black">** Unable to send any new text messages. Not signed in. ** </span>';return!1}
function _817d2bbe953b81f2499f8716e45a82b30fc76d07b5eb5c6f9b4db25c26358ae5851ba6f6dd37cc80(){_gaq.push(["_trackEvent","WebApp","App-Reload-Within-App","WebAppPageView",1]);$("#main-section").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#list-of-tabs").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$("#resultholder").tabs("disable");$("#resultholder").tabs("destroy");$("#resultholder").unbind("tabsselect");$("#tabs-phone-threads").empty();$("#sms-thread-content").empty();
_b27140a17a379048c392e97a3c84c534b6c42bf9fbce66f99c809283638f344ecb3d50674ea64189();_015b1299aa6db8e3b7c8c5b3d062a1a3a6c538f7e745353b490276e9d554c341f1a0c39f988ace15(!0)}
function _d9d93f12f3f9a32897cee08a333183819b987a9600c9b21f784f1c3e72bb8933302c7560708eac57(){document.getElementById("sign-in-status").innerHTML+='<img src="green-dot-icon.png"><span style="color:white;"> '+google_username_currently_logged_in+' | <a id="sign-out-link" href="'+signOutUrl+'"> Sign Out</a></span>';$("#sign-out-link").click(function(){_gaq.push(["_trackEvent","WebApp","SignOut-Link-Click","",1])})}var highlight_msg_id_from_search_global="";
function _0febc0946004aee9480acc99983275cd4be05f6f9ba8a6697c84f98d652c279ab3a427cc2edc08eb(){$.ui.autocomplete.prototype._renderItem=function(a,b){var c=b.label.replace(RegExp("^"+this.term),"<span style='font-weight:bold;color:Blue;'>"+this.term+"</span>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)}}
function _183266647d6f4176941e4f96cd8f33b92c68b6d6da6b69b54c155e77f8053bea9a79cbf304845ef6(){searchAutocompleteArray=[];var a=baseUrl+"/content?function=getPendingMessages&time_delay=180";console.log("getting Pending Outbound Messages");$.ajax({url:a,global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"pending_outbound_msgs",success:function(a){$.each(a.messages,function(a,b){4>a&&$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+b.id+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">'+
b.body+" --\x3e "+b.phone_num_clean+'<span class="sms-time" id="outbox-message-msgid-'+b.id+'">Request sent. <img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span></li>')})}})}
function _a32307b6d2677ca4b4e58bf8a0dde5434227dbbd110666e6ac3e4ae831e4541e2e598fe14d494100(a,b,c){var d="",e="",g="",h="";"END"==b?(h="&start_range=0&end_range=40",$("#sms-thread-content").empty()):h="&start_range=40&end_range=20000";h=baseUrl+"/content?function=GetMessages"+h;console.log("Get Messages for: "+a);""!=a&&(h+="&phone_num="+encodeURIComponent(a));$.ajax({url:h,global:!1,type:"GET",timeout:9E3,dataType:"jsonp",jsonpCallback:"getTheUsersMessages",error:function(a,b,c){$("#main-section").unblock();
$("#list-of-tabs").unblock();_2e9b38ec8821a6434ca7d2611777d76c3447f06e15c86cd10f5b614e41a6213afcb93cf650ed97b9();alert("Error in GetMessages: "+c)},statusCode:{500:function(){alert("Error 500")}},success:function(f){_gaq.push(["_trackEvent","WebApp","Load-Thread-Tab-Click","WebAppPageView",1]);$("#main-section").unblock();$("#list-of-tabs").unblock();$.each(f.messages,function(a,b){var c,f="",h="";c=!1;e="";if("80"==b.type||"81"==b.type||"82"==b.type||"83"==b.type||"84"==b.type||"85"==b.type)c=!0;
"61"==b.inbox_outbox&&!c&&(e=" sms-reply");if("11"==b.type||"70"==b.type)h=baseUrl+"/imageserve?function=fetchFile&id="+b.id,f='<div id="mms-scale-down" style="height: 60px"><a id="fancyimagepopup" style="margin-left:25px;" href="'+h+'"> <img style="vertical-align:middle;height:100%" src="'+h+'" alt="Photo in process"></a></div>';var l="",h="";c&&(l=" calling-line-item",h=" calling-line-item-color-styling");c=""+('<li id="sms-line-item-msgid-'+b.id+'" class="sms-line-item'+e+l+'">');b.body=_38e80d3a7b715ac99cb772ade1dd66274a88d11078bff51c24429e5739d72949894ec8f73ba94217(b.body);
c+='<div id= "sms-body-msgid-'+b.id+'" class="sms-body'+h+'" >'+b.body+f+"</div>";f="";h=b.ts_server;2==b.status_route?f='Pending<span class="tooltip"><span>Message has been sent to MightyText. Waiting for confirmation from your phone that it got sent.</span><img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px"></span>':99==b.status_route&&(h=b.ts_phone_forward);c+='<span class="sms-time" id="message-status-text-msgid-'+b.id+'">'+f+"</span>";b.is_starred?(star_image_url="starred.png",
star_class_at_load="starred"):(star_image_url="unstarred.png",star_class_at_load="unstarred");c=c+'<span class="sms-time">'+_3da4048ffc556b9d6c7ae43f64d7eed7675ef9843b38b789da2f768c8e9ad5c498ca6be82ff9febdDisplayPurposes(h,!0);c+='<a id="STAR-'+b.id+'" href="#" onclick="_91014c7e02dfc2764843d85f5908ef8a5fdc7a2dc5d35e00f86a0e6e66ca471030e349e4080547c2(this);" class="'+star_class_at_load+'"  style="margin-left:5px;margin-right:5px"><img src="'+star_image_url+'"/></a>';c+='<a id="DELETE-MESSAGE-'+b.id+
'"" href="#" onclick="_65a434281750bc88aabf841302e5b30f622855f9cbd945ec5703b31069f1c841e93219704f331d6f(\''+b.id+"','"+b.phone_num_clean+"','"+b.type+'\'  );" class="delete-message" style="visibility:hidden"><img width=11 height=12 src="trashcan.png"/></a>';c+="</span></li>";d=c+d;g="#sms-body-msgid-"+b.id});"END"==b?($("#sms-thread-content").empty(),$("#sms-thread-content").html(d),$("#thread-heading-name").text(c),40==f.messages.length&&($("#sms-thread-content").prepend("<button id='show-more-messages-prompt' class='button-angel' style='display:block;margin:0px auto;width:90%;font-size:13px;margin-bottom:20px;margin-top:10px; height:35px' onclick=''><B>\u2191 &nbsp&nbsp Show more messages &nbsp&nbsp\u2191</B></button>"),
f="_a32307b6d2677ca4b4e58bf8a0dde5434227dbbd110666e6ac3e4ae831e4541e2e598fe14d494100('"+a+"','"+g+"');",f+="$('#show-more-messages-prompt').html('<img id=\"getting-more-messages-graphic\" src=\"transparent-ajax-loader.gif\">');_gaq.push(['_trackEvent','WebApp','User-Click-See-More-Messages','',1]);",$("#show-more-messages-prompt").attr("onclick",f)),setTimeout('$("#sms-thread-content").scrollTop(4000000+$("#sms-thread-content").height());',10)):($("#show-more-messages-prompt").remove(),$("#sms-thread-content").prepend(d).fadeIn("slow"),
$("#sms-thread-content").scrollTo(b,4,{offset:-50}));$("#sendbox-main").focus();$("#toggle-calls").attr("checked")||$(".calling-line-item").hide();objNewSettings&&1==objNewSettings.enter_to_send&&$("#sendbox-main").unbind("keydown").keydown(function(a){13==a.keyCode&&!a.shiftKey&&(a.preventDefault(),$("#sendbox-main").blur(),console.log("enter triggered, and blur attempt - KEYDOWN"),$("#send-button-main").click())});""!=highlight_msg_id_from_search_global&&(f="#sms-body-msgid-"+highlight_msg_id_from_search_global,
$(f).css({"font-size":"14px","font-weight":"bolder"}),$(f).css({color:"#243443"}),$("#sms-thread-content").scrollTo(f,400,{offset:-5}));highlight_msg_id_from_search_global="";$(".sms-line-item").mouseover(function(){$(this).find(".delete-message").css("visibility","visible")});$(".sms-line-item").mouseout(function(){$(this).find(".delete-message").css("visibility","hidden")});$("a#fancyimagepopup").fancybox({type:"image",transitionIn:"elastic",transitionOut:"elastic"})}})}
function _38e80d3a7b715ac99cb772ade1dd66274a88d11078bff51c24429e5739d72949894ec8f73ba94217(a){for(;-1<a.search("[\n]");)a=a.replace("\n","<br >");return a=_049aa165db6223a076237384bec028620b7243d8787d41d9c35c57ef9e4aba799bacefac312149a4(a)}
function _71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56(a,b,c,d,e,g,h,f){var k="",m="";"single-compose"==b?(m="#send-button-single-text",k=$("#send-one-text").val()):"test-sms-send"==b?(m="N/A",k="Sending Test SMS from MightyText"):(m="#send-button-main",k=$("#sendbox-main").val());var p="",p="",s=baseUrl+"/client?function=send";isCorsSupported||(s="https://mightytext.net/proxy-in-root.php?route=ClientSendC2DM");var r=new XMLHttpRequest;r.open("POST",s,!0);r.withCredentials=
"true";r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onreadystatechange=function(){if(4==this.readyState&&200==r.status){var f=r.responseText;if(-1<f.indexOf("OK"))if(0<f.indexOf("phone call initiated successfully"))document.getElementById("msg").innerHTML="Your phone is now dialing "+c,document.getElementById("remote-phone-dial").innerHTML="Dial from Phone",alert("Your phone is now dialing "+c+". You should get your phone to talk.");else{if(0<f.indexOf("sent to phone")){var f=
f.split(/\{([^}]+)\}/)[1],j="";"send_sms"==a?j="SMS":"send_mms"==a&&(j="MMS");_485f4c9ec72a4dfb2171825d47ad41b66e3bc6b1cba580c17892bf89f0f5ea48d0a65899e98baa38(d);_7748eee5b0090d4578d96130d8e215a12d2be7cd6249b4fa89fe94e6d65d52424325137b5c761875(d,c);var l="outbox-message-msgid-"+f;$("#outbox-pending-messages").prepend('<li id="outbox-msgid-'+f+'" class="" style="text-align:left; padding-left:10px;line-height:10px;border-bottom:1px dotted #D8DFEA;padding:3px;font-size:10px">"'+k+'" --\x3e '+e+'<span class="sms-time" id="'+
l+'">Sending\u2026</span></li>');document.getElementById(l).innerHTML='Request sent<br>to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">';"single-compose"==b?($("#send-one-text").val(""),$("#compose-number").val(""),_1f0c2be374a0153f49abdd71ed8da54ea25570df108d85109b999c28fc94fb586c333ad60df758b4(),$("#msg").append(j+" to "+e+"\u2026"),0==h&&$("#msg").prepend("Request sent to MightyText: ")):(document.getElementById("msg").innerHTML="Request sent to MightyText. "+
j+" to "+e,$("#mms-image-preview").hide(),$("#mms-image-preview").attr("src",""),$("#mms-blob-id-holder").text(""),$("#send-button-main").text("Send"),$("#send-button-main").attr("disabled",!1),$("#send-button-main").css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"}),$("#charsLeft-main").text("500"),j="message-status-text-msgid-"+f,k=_38e80d3a7b715ac99cb772ade1dd66274a88d11078bff51c24429e5739d72949894ec8f73ba94217(k),$('<li id="sms-line-item-msgid-'+
f+'"  class="sms-line-item sms-reply JUST-SENT"><div id="sms-body-msgid-'+f+'" class="sms-body" style="display:none" '+p+">"+k+'</div>  <span class="sms-time" id="'+j+'">Sending\u2026</span></li>').appendTo("#sms-thread-content"),$("#sms-body-msgid-"+f).fadeIn("fast"),$("#sms-thread-content").scrollTop(4E5+$("#sms-thread-content").height()),document.getElementById(j).innerHTML='Sent to MightyText<img src="red-clock-waiting.png" style="margin-top:10px;margin-left:5px">',$("#sendbox-main").val(""),
setTimeout('$("#sendbox-main").focus();',0))}}else-1<f.indexOf("LOGIN_REQUIRED")?(alert("Not logged in to MightyText."),_77988aed96e3ed365c2418b420510dff2411588c9652624cd35ead6cbbfe174e460bafc5595f8522(m)):-1<f.indexOf("DEVICE_NOT_REGISTERED")?(alert("Android Phone not registered with MightyText with this Google Account, or MightyText Android App not installed properly."),_77988aed96e3ed365c2418b420510dff2411588c9652624cd35ead6cbbfe174e460bafc5595f8522(m)):-1<f.indexOf("DeviceQuotaExceeded")?(alert("Android Phone Quota Exceeded.  Error Code: DeviceQuotaExceeded (C2DM)"),
_77988aed96e3ed365c2418b420510dff2411588c9652624cd35ead6cbbfe174e460bafc5595f8522(m)):(alert("General Error when issuing C2DM request."),_77988aed96e3ed365c2418b420510dff2411588c9652624cd35ead6cbbfe174e460bafc5595f8522(m),g("general_error",r))}};if("send_sms"==a)if(-1<k.search("0-35")){var l="deviceType=ac2dm&action=set_env&action_data="+encodeURIComponent(k);alert("Switching Android Env to: "+k)}else-1<k.search("MIGHTYPROD")?(l="deviceType=ac2dm&action=set_env&action_data=prod",alert("Switching Android Env to: "+
k)):l="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=send_sms&action_data="+encodeURIComponent(k);else"send_mms"==a?l="phone="+encodeURIComponent(c)+"&type=11&source_client=31&deviceType=ac2dm&action=send_mms&action_data="+encodeURIComponent(k)+"&mms_object_key="+encodeURIComponent(f):"make_automated_call"==a?l="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=make_automated_call&action_data="+encodeURIComponent(k):"get_latest_messages_from_phone"==
a?l="phone="+encodeURIComponent(c)+"&type=10&source_client=31&deviceType=ac2dm&action=get_latest_messages_from_phone&action_data="+encodeURIComponent(k):"mark_single_message_read"==a?l="deviceType=ac2dm&type=10&source_client=31&action=mark_single_message_read&action_data="+encodeURIComponent(k):"mark_whole_thread_read"==a&&(l="deviceType=ac2dm&action=mark_whole_thread_read&action_data="+encodeURIComponent(k));isCorsSupported||(l=l+"&wagdaedunn="+ckSharedGlobal);r.send(l)}
function _77988aed96e3ed365c2418b420510dff2411588c9652624cd35ead6cbbfe174e460bafc5595f8522(a){$(a).text("Send");$(a).attr("disabled",!1);$(a).css({background:"#ECECEC url('css3buttons/images/css3buttons_backgrounds.png') 0 0 no-repeat",color:"#3C3C3D"});"#send-button-main"==a?$("#sendbox-main").focus():$("#send-one-text").focus()}
function _84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493(a){console.log("listener called for sendSMS function. status returned is: "+a)}
function _c46cb950857283e065af4e841ca56728677b86359c76de953ec07cc120de5d9e9c2195ac99e2470d(a){$.ajax({url:"easyXDM/easyXDM.min.js",dataType:"script",cache:!0,success:function(b,c){easyXDM.DomHelper.requiresJSON("easyXDM/json2.js");console.log(b);console.log(c);console.log("XDM JS Load was performed.");_9ca61bc953399f02e1e61559102e8f12bd9988841d807ce7621fd50b501526a4613ac4d7cc338a98(a)}})}
function _c1a9839e6bf9ebf366136adb37a9ff7e1cd3695bbd56538d42d0a2f707819294cffdc98b013bd194(a){a=a.toString();console.log("rightmost_digits_to_find is: "+a);console.log("length of rightmost_digits_to_find is: "+a.length);7>a.length&&(a=_e1da2a0fda25ee1865940678103797062da7cba55296c37edc970c31de7c9ec1667e4bd363cec4e8(a,7),console.log("after padding: "+a));for(var b=Array(2),c=0;c<googleContactsArray.length;c++){var d=_1190522a55ffda492c5f8e7d977692b124398d32a525a7df3d61c9dd8283a9afef3d5dc770807788(googleContactsArray[c].phone_number_full).search(a);
if(-1<d)return console.log("FOUND "+a+" in Google Contact Array- substring match position is: "+d+" matched with: "+googleContactsArray[c].phone_number_full),b[0]=googleContactsArray[c].name,b[1]=googleContactsArray[c].thumbnail,b}return""}function _d4a2c160d82d7f35df2a8056d04142f1aa29414644bef22b0d79d6bf0e5f19d0e78560d62a5fcd23(){return""}
function _2a121500a4bdec7d2c0b058cabff378a314fd3cf447dac9531aea2968df6d014e559c4831d8f3741(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"}
function _ca1eaf374167f617140c3f7556224464739f8b1896e021dacb2bda11cd207a74f8ed660781f096d0(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}function _45c5dc27b74aecf90cfbc9b7edad0052a74a4c077a7667e3dff704f246620bd1f10982e606e41850(a){_2a121500a4bdec7d2c0b058cabff378a314fd3cf447dac9531aea2968df6d014e559c4831d8f3741(a,"",-1)}
function _e1da2a0fda25ee1865940678103797062da7cba55296c37edc970c31de7c9ec1667e4bd363cec4e8(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function _afcdcc32ed8e79a02f109d33032971188e148763c8566e7b1826ee557cbc07695dec489858f75f6a(){$.ajax({type:"GET",url:baseUrl+"/whitelist?function=setBetaFlag",dataType:"jsonp",jsonpCallback:"setflag",success:function(){window.location.reload()}}).responseText}
function _d86b965057dd6a876ba64acb64a89a19cb538fdf99827698fa12a064426d1206cc7503473093f18c(){$.blockUI({message:""});$.ajax({type:"GET",url:baseUrl+"/imageupload",dataType:"jsonp",timeout:3E3,jsonpCallback:"getimageuploadcode",success:function(a){_c46cb950857283e065af4e841ca56728677b86359c76de953ec07cc120de5d9e9c2195ac99e2470d(a);$.unblockUI();_254adc40db41b3637d6d31b774cee1c3966994cd42391ceb36fcf99d4acac328036505b0798bde22()},error:function(a,b,c){alert("Error in getting File Upload URL: "+c);$.unblockUI();
console.log("error in _d86b965057dd6a876ba64acb64a89a19cb538fdf99827698fa12a064426d1206cc7503473093f18c")}});return!1}function _d9ce0d27341e534bdb5bd4541df2678a52dcdeaa35f4797a8c080364d827adfa7c9778861f235d13(a){$.ajax({type:"POST",url:"check_admin.php",data:{email_check_pso:a},success:function(a){"true"!=a&&(alert("No dev access!"),window.location="https://mightytext.net")}})}
function _33e7eae8c6b296487453469111d602af39d6045b73e4bcfbfbd05dfc97c34ce97525ef4873e48ea6(a){$.ajax({type:"POST",url:"https://mightytext.net/app/checkpwd.php",data:{pwd:a},success:function(a){"true"==a?(_afcdcc32ed8e79a02f109d33032971188e148763c8566e7b1826ee557cbc07695dec489858f75f6a(),setTimeout("window.location.reload();",2E3)):(alert("Not a valid passcode..."),window.location="http://mightytext.net")}})}
function _91014c7e02dfc2764843d85f5908ef8a5fdc7a2dc5d35e00f86a0e6e66ca471030e349e4080547c2(a){var b=$(a).attr("id").substr(5),c=baseUrl+"/content?function=updateMsgInfo";$(a).hasClass("starred")?$.ajax({type:"GET",url:c,dataType:"jsonp",jsonpCallback:"make_unstarred",data:{id:b,is_starred:0},success:function(b){!1==b.updated?alert("Error - Message not Un-Favorited. Please report to MightyText team (Error Code: UNFAV7411)"):($(a).removeClass("starred"),$(a).addClass("unstarred"),$(a).find("img").attr("src",
"unstarred.png"))}}).responseText:$.ajax({type:"GET",url:c,dataType:"jsonp",jsonpCallback:"make_starred",data:{id:b,is_starred:1},success:function(b){!1==b.updated?alert("Error - Message not Favorited. Please report to MightyText team (Error Code: FAV3985)"):($(a).removeClass("unstarred"),$(a).addClass("starred"),$(a).find("img").attr("src","starred.png"))}}).responseText}
function _8d61f4f3c283eb87102350cfc2837a8c789165004e93b74d75767979139e86781c066e884d5c7183(){if(_4cd95c22d8038a604f7b4512bf99d1d802fbd09330b215f531f009f2e6967db02e58354f71d44dc2())return!1;_2e9b38ec8821a6434ca7d2611777d76c3447f06e15c86cd10f5b614e41a6213afcb93cf650ed97b9();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"POST",dataType:"jsonp",jsonpCallback:"getUserSettingsCallBack",
success:function(a){_5a4c33c50f3d06fd020911a19dca100db4dd892f43a731724ccd50093b04a97d8737639cf3c7c377(a.usersettings)}})}
function _841fde913c43ed4153d11b107a9cb46eb807e69cb27b41feecc0a5a45ad1bfa42765474174d5e09e(a){if(_4cd95c22d8038a604f7b4512bf99d1d802fbd09330b215f531f009f2e6967db02e58354f71d44dc2())return!1;_2e9b38ec8821a6434ca7d2611777d76c3447f06e15c86cd10f5b614e41a6213afcb93cf650ed97b9();$("#sms-container").block({message:null,overlayCSS:{opacity:"0.6",backgroundColor:"white"}});$.ajax({url:baseUrl+"/usersettings?function=getUserSettings",global:!1,type:"GET",dataType:"jsonp",jsonpCallback:"getUserSettingsCallBack",
success:function(b){a&&_5a4c33c50f3d06fd020911a19dca100db4dd892f43a731724ccd50093b04a97d8737639cf3c7c377(b.usersettings);globalSettingsJSONUponLoad=b.usersettings;globalSettingsJSONUponLoad.settings_list?objNewSettings=jQuery.parseJSON(globalSettingsJSONUponLoad.settings_list.value):(objNewSettings=jQuery.parseJSON("{}"),_efa7545910de62c800020e3f501755564308b3f2576fdacd60566e8f913722bd88d249769111009c("settings_list",'{"enter_to_send":1,"notif_content":2}',!1))}})}var helperGlobalSettingsObjectSetter;
function _b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(a,b){helperGlobalSettingsObjectSetter=objNewSettings;eval("helperGlobalSettingsObjectSetter."+a+" = "+b);var c=$.toJSON(helperGlobalSettingsObjectSetter);_efa7545910de62c800020e3f501755564308b3f2576fdacd60566e8f913722bd88d249769111009c("settings_list",c,!0)}
function _efa7545910de62c800020e3f501755564308b3f2576fdacd60566e8f913722bd88d249769111009c(a,b,c){c&&$("#msg").html("Saving Settings...");var d="",e=baseUrl+"/usersettings?function=updateUserSettings",e=e+("&"+a+"="+encodeURIComponent(b));isCorsSupported||(e="https://mightytext.net/proxy-in-root.php?route=updateUserSettings",d="&wagdaedunn="+ckSharedGlobal,d+="&"+a+"="+encodeURIComponent(b));$.ajax({url:e,global:!1,xhrFields:{withCredentials:!0},type:"POST",data:d,dataType:"json",success:function(a){c&&
("success"==a.usersettings?document.getElementById("msg").innerHTML="Settings saved.":document.getElementById("msg").innerHTML="Error updating setting.",_d7c97f451426402be8f3e52fb6fda081eee372c1f06240475c503a4b71a86549feecab9338493e0c("USER_UPDATED_SETTINGS_IN_WEBAPP:"))}})}
function _78bc644dd686422751fd798a9e265aa13ca71c6e943361c31cb8fcbb01f15dddf9c5736bc54584a0(a){var b=$("#sendbox-main").val();if(a){if(1>b.length)return alert("Message is blank"),$("#sendbox-main").focus(),!1;if(500<b.length)return alert("Message is > 500 Characters long."),!1}return!0}
function _7ac2c3cf1801eb7865b44e127cd5dd987ec6416b420c07734533d784cad658c5c97ae404933816e3(){var a;a='<div id="holder-msg"> <div id="msg" class="user-alert" style=""></div></div><div id="sms-container"><div id="sms-thread-heading" style="float:left;width:100%;z-index:10;padding-bottom:10px;margin-bottom:0px;margin-top:0px;text-align:left;clear:both;border-bottom:1px solid #CCC;background-color:#0099CC;border-radius: 5px 5px 0px 0px;">';a+='<span id="thread-heading-name" style="font-size:22px;padding-left:10px;margin-top:13px;margin-left:5px;color:white;float:left;-webkit-text-stroke: 1px transparent;font-weight:500" class="tk-proxima-nova-condensed"></span>';
a+='<span id="thread-heading-actions" style="float:right;margin-top:5px">';a+='<button id="delete-all-from-sender" style="float:right;font-size:11px;padding:7px" class="negative button" onclick="nothing_placeholder"><span class="trash icon"></span> Delete all</button>';a+='<button id="remote-phone-dial" style="float:right;font-size:13px;margin-left:10px;padding-left:5px" class="positive" onclick="_71d7dfed765832816dc3d778ab38c31855ccbefe40f9fe80ca97fda1b4f90e77f664f1800e043a56(\'send_sms\',\'test-SMS from stub\',111111,11111,\'_84488110acb4f7c1c6cc0ddd2733f778e00826fcbaa3a8b150fdf1d0507c32e6ebc7db66d6d5b493\');"> <img height=14 width=14 style="margin-right:10px" src="phone_call_icon.png">Dial from Phone</button>';
a+='<span style="float:left;color:white;font-size:12px;margin-left:10px;margin-top:7px;margin-right:10px;padding-left:5px"><input type="checkbox" name="show-calls-toggle" value="x" id="toggle-calls" checked onclick="$(\'.calling-line-item\').toggle();"/>Show Calls</span>';a+="</span></div>";a+='<div id="sms-thread-content" class="text-message-list"></div>';a+='<div id="inputsms-main">';a+='<textarea id="sendbox-main" name="limitedtextarea" onfocus="document.getElementById(\'error-text-content-inputsms-main\').innerHTML=\'\';" style="float:left;margin-left:10px;width:60%;max-width:60%;height:50px;max-height:90%;border:1px solid #CCC;padding:5px;font-size:16px"></textarea>';
a+='<span style="margin-top:160px"></span>';a+='<span id="holder-adjacent-sendbox" style="float:left"><button id="send-button-main" style="float:left;font-size:13px;margin-left:10px" class="positive" onclick=""> <span class="mail icon"></span>Send</button>';a+='<span id="charsLeft-main" style="font-size:14px;font-weight:bold;color:#3F8CD9;border:none;margin-left:10px;margin-top:10px;clear:both;float:left"> </span>';a+="</span>";a+=_e7902a60afb241fab80e98f92f9501be457a318ec1eca88e00db81e17c7504b372b5097f6008ab48();
a+='<div id="error-text-content-inputsms-main" style="font-weight:bold;color:red;font-size:14px"></div>';a+="</div>";a+="</div>";document.getElementById("main-section").innerHTML=a;$("#sendbox-main").NobleCount("#charsLeft-main")}function _edcdd693a2984008d9caf14c18d4a8ea78dd86332381b7eb667f723a3db4047404e085d4c7f465ef(a){$(a).toggleClass("pressed")}function _e3cb8b81a665cff4d56d2421a1b681e15a02241c3565f4599d436f060465e6843e4886b973b3e0b3(a,b,c){b=$(b).val().length;$(c).text(a-b)}
function _e7902a60afb241fab80e98f92f9501be457a318ec1eca88e00db81e17c7504b372b5097f6008ab48(){var a;a='<button id="upload-image-mms" style="float:left;font-size:11px;margin-left:10px" class="positive" onclick="_d86b965057dd6a876ba64acb64a89a19cb538fdf99827698fa12a064426d1206cc7503473093f18c();"><img height=14 width=14 src="attach-mms-icon.png">MMS</button><div id="holder-mms-image-preview" style="height:60px;max-width: 160px;overflow: auto;border: 1px dashed lightgray;">';a+='<img id="mms-image-preview" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';
a+="</div>";a+='<span id="mms-blob-id-holder" style="display:none"></span>';return a+='<div id="mms-upload-dialog" style="display:none;text-align:left"></div>'}
function _9ff7fd2b7bc7fcf50b7934519ccca8ddd47dc0320f3bf9613509c46025a0f964727fa54c0105c7de(){$("#mms-upload-dialog").empty();var a;a='<form id="frmUpload" style="font-size:20px" method="POST" target="upload_target" enctype="multipart/form-data"> <input id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="104" type="hidden" /><input id="mms-file-attach" type="file" name="myFile" onchange="_0ec29ff3c3a5d88520bcd476fd1f1df76a610c21e8b6d6455bc2d24ce98d78082ac80746ce9071be();"  style="font-size:14px;font-family:arial"/><input type="submit" id="btnSubmit" style="display:none" value="Upload file"/></form>';a+=
'<br><img id="file-upload-progress-indicator" style="display:none" src="upload-progress-pie.gif">';a+='<div id="mms-upload-image-preview-pane" style="height:100px">';a+='<img id="file-just-uploaded" style="display:none;vertical-align:middle;height:100%;float:left;margin-top:10px" src="">';a+='<span id="file-uploaded-temp-blobid-holder-in-dialog" style="display:none"></span>';a+="</div>";$("#mms-upload-dialog").html(a)}
function _254adc40db41b3637d6d31b774cee1c3966994cd42391ceb36fcf99d4acac328036505b0798bde22(){_9ff7fd2b7bc7fcf50b7934519ccca8ddd47dc0320f3bf9613509c46025a0f964727fa54c0105c7de();$("#mms-upload-dialog").dialog({open:function(){$("#mms-dialog-button-ok").attr("disabled",!0);$("#mms-dialog-button-ok").css("color","#BFBFBF");$("#mms-dialog-button-ok").removeClass("hover")},width:400,modal:!0,title:"Attach a Picture (MMS)",buttons:[{text:"OK",id:"mms-dialog-button-ok",click:function(){$("#mms-blob-id-holder").text($("#file-uploaded-temp-blobid-holder-in-dialog").text());
var a=$("#file-just-uploaded").attr("src");$("#mms-image-preview").show();$("#mms-image-preview").attr("src",a);$(this).dialog("close")}},{text:"Cancel",id:"mms-dialog-button-cancel",click:function(){$("#mms-upload-dialog").empty();$("#mms-blob-id-holder").text("");$(this).dialog("close")}}]})}
function _9ca61bc953399f02e1e61559102e8f12bd9988841d807ce7621fd50b501526a4613ac4d7cc338a98(a){var b,c=baseUrl;new easyXDM.Rpc({remote:c+"/itest2.htm",swf:c+"/../easyxdm.swf",onReady:function(){var c=document.getElementById("mms-upload-dialog"),e=document.getElementById("frmUpload");e.action=a;e.style.display="block";c.style.display="block";b=document.getElementById("btnSubmit");e.onsubmit=function(){b.disabled="disabled";$("#file-upload-progress-indicator").show()}}},{local:{returnUploadResponse:function(a){b.disabled=
null;"success"!=a.status?alert("Error uploading attachment."):($("#mms-dialog-button-ok").attr("disabled",!1),$("#mms-dialog-button-ok").css("color","green"),$("#file-upload-progress-indicator").hide(),$("#file-just-uploaded").attr("src",baseUrl+"/imageserve?function=viewFile&blob-key="+a.blobID),$("#file-just-uploaded").show(),$("#file-uploaded-temp-blobid-holder-in-dialog").text(a.blobID))}}})}
function _0ec29ff3c3a5d88520bcd476fd1f1df76a610c21e8b6d6455bc2d24ce98d78082ac80746ce9071be(){"undefined"!==typeof FileReader&&2097152<$("#mms-file-attach")[0].files[0].fileSize?alert("File too large. File upload limit is 2MB"):$("#frmUpload").submit()}var globalSettingsJSONUponLoad,objNewSettings;
function _5a4c33c50f3d06fd020911a19dca100db4dd892f43a731724ccd50093b04a97d8737639cf3c7c377(a){_gaq.push(["_trackEvent","WebApp","Settings-Pane-Load","",1]);document.getElementById("msg").innerHTML="";$("#sms-container").unblock();$("#sms-container").css("height","90%");document.getElementById("sms-container").innerHTML="";document.getElementById("sms-container").innerHTML='<h2 style="padding:10px;padding-bottom:0px;margin:0;text-align:left"><B>Settings</B></h2><div id="settingsPane" style="color:#333;padding:10px;text-align:left;background-color:white;margin-top:5px;height:90%;overflow-y:scroll"></div>';
document.getElementById("settingsPane").innerHTML+='<div id="numDaysKeepMessagesSelection" class="options-section" style="margin-top:0px"><strong>How Long to Keep Messages</strong>: How long should MightyText keep a copy of SMS, MMS, Call Logs<br><br> <select id="setting_num_days_keep" name="num_days_keep" onchange="_efa7545910de62c800020e3f501755564308b3f2576fdacd60566e8f913722bd88d249769111009c(this.name,this.value,true);"><option value="1">1 day</option><option value="14">14 days</option><option value="30">30 days</option><option value="60">60 days</option><option value="180">6 months</option></select></div>';
$('#setting_num_days_keep option[value="'+a.num_days_keep+'"]').attr("selected","selected");if(a.settings_list)if(objNewSettings=jQuery.parseJSON(a.settings_list.value),void 0==objNewSettings||void 0==objNewSettings.enter_to_send)objNewSettings.enter_to_send=1,_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62("enter_to_send",1);else{document.getElementById("settingsPane").innerHTML+='<div id="shouldEnterSendMessage" class="options-section"><strong>Pressing Enter to send message (when typing message)</strong><br><br> <input type="radio" name="enter_to_send" value="1" onclick="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);">Yes, pressing Enter sends message <span style="font-size:11px;color:green">&nbsp (Can use Shift-Enter for new line)</span><br> <input type="radio" name="enter_to_send" value="0" onclick="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);">No, pressing Enter will not send message</div>';
a='[value="'+objNewSettings.enter_to_send+'"]';$("input:radio[name=enter_to_send]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_toggle_on_off)objNewSettings.notif_toggle_on_off=1,_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62("notif_toggle_on_off",1);document.getElementById("settingsPane").innerHTML+='<div id="notificationToggleOnOff" class="options-section"><strong>Popup Notifications</strong>: Display a Popup  on Incoming SMS, MMS, Calls<br><br> <input type="radio" name="notif_toggle_on_off" value="1" onclick="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);">Popup Notifications ON <br> <input type="radio" name="notif_toggle_on_off" value="0" onclick="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);">Popup Notifications OFF<br></div>';
a='[value="'+objNewSettings.notif_toggle_on_off+'"]';$("input:radio[name=notif_toggle_on_off]").filter(a).attr("checked",!0);if(void 0==objNewSettings||void 0==objNewSettings.notif_dismiss_time)objNewSettings.notif_dismiss_time=9999,_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62("notif_dismiss_time",9999);document.getElementById("settingsPane").innerHTML+='<div id="notifDismiss" class="options-section"><strong>Popup Notification Auto-Close</strong>: If &amp when to automatically close Popup Notifications<br><span style="font-size:11px;color:green">(Chrome Extension & Firefox-PC only)<a onclick="_0ed795dd7385c2d5ccdee39e0c9f24c4bf94fb17db781ef0d4f4997f0ec57dcabea1c98873f937cc();"> <U>Learn more</U></a></span><br><br> <select id="setting_notif_dismiss" name="notif_dismiss_time" onchange="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);"><option value="9999">Do Not Auto-Close</option><option value="10">After 10 seconds</option><option value="30">After 30 seconds</option><option value="60">After 1 minute</option><option value="300">After 5 minutes</option></select></div>';
$('#setting_notif_dismiss option[value="'+objNewSettings.notif_dismiss_time+'"]').attr("selected","selected");if(void 0==objNewSettings||void 0==objNewSettings.notif_content)objNewSettings.notif_content=2,_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62("notif_content",2);document.getElementById("settingsPane").innerHTML+='<div id="notificationLevelSelection" class="options-section"><strong>Popup Notification Privacy</strong>: When a new text message arrives, what to show in the popup.<br><br> <input type="radio" name="notif_content" value="2" onclick="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);">Sender Name &amp Message Text ("<B>Message from Bob:</B> Running 15 minutes late") <br> <input type="radio" name="notif_content" value="1" onclick="_b57a5a69a1b5b1e7204098e8cf5bc97a3377131a96a6364f83e8634a9361a88d179708f70d512d62(this.name,this.value);">Only Sender Name ("<B>Message from Bob:</B> Click to see message...")</div>';
a='[value="'+objNewSettings.notif_content+'"]';$("input:radio[name=notif_content]").filter(a).attr("checked",!0);document.getElementById("settingsPane").innerHTML+='<div id="adminTools" class="options-section"><strong>Misc</strong><br><br>';document.getElementById("adminTools").innerHTML+='<button onclick="_e043d400bc6b110b71338a92007c313905a664e23635ccff0b616d8ec9794689814d548ba7517031();">Send a test SMS (to USA #)</button>';void 0==current_server_stored_google_contacts_token?document.getElementById("adminTools").innerHTML+=
"<button onclick=\"window.location='"+newContactsOAuthURL+"';\">Link Google Contacts</button><br>":document.getElementById("adminTools").innerHTML+='<button onclick="_9c3a4a2e045bdfba5c739b7b66814097c9c82d3908055a00839dfcc34278d7c83dd4049947d3994b();">Unlink from Google Contacts</button><br>';document.getElementById("adminTools").innerHTML+="<button onclick=\"_a69aaa08fec5194e72db3779292d92e726185945e1cdf5c7ab385406da908ac62ce7c69779d5e8fe('push_phone_contacts_to_cloud','na');\">Refresh Contacts from Phone</button>";
document.getElementById("adminTools").innerHTML+='<button onclick="_0c238b792d469f04fbe8ffdcba00335dcf76de1cc22171e9ccc3eaa1f43a19d86be801e0341c4999();">Clear local Contact Name Cache</button>';document.getElementById("settingsPane").innerHTML+="</div>"}else objNewSettings=jQuery.parseJSON("{}"),_efa7545910de62c800020e3f501755564308b3f2576fdacd60566e8f913722bd88d249769111009c("settings_list",'{"enter_to_send":1,"notif_content":2}',!1)}
function _0c238b792d469f04fbe8ffdcba00335dcf76de1cc22171e9ccc3eaa1f43a19d86be801e0341c4999(){var a=$.jStorage.index();console.log(a);$.jStorage.flush()}
function _0ed795dd7385c2d5ccdee39e0c9f24c4bf94fb17db781ef0d4f4997f0ec57dcabea1c98873f937cc(){alert("This setting will only work if running the Chrome Extension(PC or Mac), or using Firefox on a PC.  \n\n It won't work for Firefox-Mac users using Growl as the notification dismiss timeout is set within Growl.\n\nSafari & Internet Explorer users: We plan to have a notifications feature soon.")}
function _109fc1805c37ba6aef6b9a57462542995fbe0e358be9cd2761fcbf57d338084ae17147efc0ef5b02(a){null==window.localStorage?_23a72b4b1452794c76a05bc6804f1ad8aaf421813a425331cd8500cd360b87ec760ca2e0bd6ddd2b("Local storage is required!"):(a=a.value,3==a?window.localStorage.notifLevel=3:2==a?window.localStorage.notifLevel=2:1==a&&(window.localStorage.notifLevel=1),document.getElementById("msg").innerHTML="Updated Notification Preference")}
function _e011630b6bbcc342084d4a03f29680220e5a0ce26988697be6a7e7f1299acd26dd71c3522b32ca8a(){$.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:500,block_negative:!0,cloak:!1,in_dom:!1}}
function _e2331288a1618ab93cc5fcfafb956ddce508c5412019d8d301d5ae77ca0bd5899c36a6e2a073965a(a){null==window.localStorage?_23a72b4b1452794c76a05bc6804f1ad8aaf421813a425331cd8500cd360b87ec760ca2e0bd6ddd2b("Local storage is required!"):(a=a.value,1==a?window.localStorage.overridePrefix=1:0==a&&(window.localStorage.overridePrefix=0),document.getElementById("msg").innerHTML="Updated +1 Override Setting",$("#msg").fadeOut(2E3,function(){document.getElementById("msg").innerHTML="";$("#msg").show()}))}
function _2917470393e684a67e0ccf60c720ecd1bc5e5c3dfbd4175f086f9e781bef5d956cf56749280597d8(a,b,c){a=document.getElementById(a);b=document.getElementById(b);a.value.length>c?a.value=a.value.substring(0,c):b.value=c-a.value.length}
function _ee850f6f1c23dfecf46361810604135ce0916be58ec95145d035b2994857dfa852d82decb06d51ed(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);b='<table class="'+b+'">';if(c){b+="<thead><tr>";for(var d in a[0])b+='<th scope="col">'+d+"</th>";b+="</tr></thead>"}b+="<tbody>";for(c=0;c<a.length;c++){b+=0==c%2?'<tr class="alt">':"<tr>";for(d in a[c])b+="<td>"+a[c][d]+"</td>";b+="</tr>"}return b+="</tbody></table>"}
function _df4adc479db8f0a19577031485d2ce4dd4ad454d4eacc045077ccc25517e485791afe2a801a4e484(a,b,c){void 0===b&&(b="mediumTable");void 0===c&&(c=!0);a=JSON.parse(a);b='<table class="'+b+'"><tbody>';for(var d=0;d<a.length;d++){var e=0,g;for(g in a[d])b+=0==e%2?'<tr class="alt">':"<tr>",c&&(b+='<th scope="row">'+g+"</th>"),b+="<td>"+a[d][g]+"</td>",b+="</tr>",e++}b+="</tbody>";return b+="</table>"}
function _7878c431368c573e3f82f9a601796cfc9b41a63e21c399d6c4f86432071a3e68c8b33eeffb956e52(){setTimeout("_9e13e6086c99803a661e7d522cf450a5c02b18d083adf25567011e11abb5bd574b48d16cfad3d0ef();",5E3)}function _9e13e6086c99803a661e7d522cf450a5c02b18d083adf25567011e11abb5bd574b48d16cfad3d0ef(){$.titleAlert("New SMS Received!",{requireBlur:!1,stopOnFocus:!0,duration:3E4,interval:1500})}
function _049aa165db6223a076237384bec028620b7243d8787d41d9c35c57ef9e4aba799bacefac312149a4(a){return a.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")}function _3da4048ffc556b9d6c7ae43f64d7eed7675ef9843b38b789da2f768c8e9ad5c498ca6be82ff9febdDisplayPurposes(a,b){b&&(a+=" UTC");return moment(new Date(a)).format("MMM DD h:mm a")}
function _96d2d666d3b74fcbc8bbc7453b3a6c142c7a480f8d4709a9a9cfe773fd0b5d3982f448ade4e4eded(){$.ajax({url:"https://1-dot-0-58-dot-textyserver.appspot.com/test?function=test500",global:!1,type:"POST",xhrFields:{withCredentials:!0},statusCode:{500:function(){alert("Error 500")}},success:function(a){alert(a);console.log(a)}})}var ckSharedGlobal="";function _4e21046c333c960d25d384d3fe5e3b537fc4a83d340cbefb60656a374978ff81f7c843f1dfb9a7bb(a){ckSharedGlobal=a}
function _d56ed91ba9babb536ba9448ef91488dad3cdd639dad39ce1a0f516e191b0b515ea02e6cbc4ea76b6(){$.ajax({url:baseUrl+"/test?function=showstuff",global:!1,type:"GET",timeout:8E3,jsonpCallback:"_4e21046c333c960d25d384d3fe5e3b537fc4a83d340cbefb60656a374978ff81f7c843f1dfb9a7bb",dataType:"jsonp",error:function(){},success:function(){}})}isCorsSupported||_d56ed91ba9babb536ba9448ef91488dad3cdd639dad39ce1a0f516e191b0b515ea02e6cbc4ea76b6();
function _2a121500a4bdec7d2c0b058cabff378a314fd3cf447dac9531aea2968df6d014e559c4831d8f3741(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}function _2a121500a4bdec7d2c0b058cabff378a314fd3cf447dac9531aea2968df6d014e559c4831d8f3741InSeconds(a,b,c){var d=new Date;d.setTime((new Date).getTime()+1E3*c);b=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+b}
function _0b5785bfeeeb9c31de9bed5f807fb9706ac9909209ebf42f26b88d83ccdb3cbe9c2ec95be6494d7d(){return"withCredentials"in new XMLHttpRequest?!0:!1}function _0724587eb73684d04f4ac251e3bf3d69cb23eff4d04133bd840b69ee1554e111912b419928dea133(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}
function _7b6363ffa2c2f58327d78b38da67d9181f58d76dd847b7be86cd128f4824dc04056f89fb8431a11e(){return $.ajax({type:"GET",url:"https://www.googleapis.com/plus/v1/people/me?pp=1&key=testwgda",cache:!1,jsonpCallback:"testConnection",dataType:"jsonp",success:function(){console.log("Network ping to FB -- fine...");return!0},error:function(){alert(1);return!1}})}
function _a5fc1ec10100951bc95ee279b2a93b91c7038ac3dfc4740d90d56df54cc65034f269da76e8f7bde0(){var a=new XMLHttpRequest;a.overrideMimeType("text/plain; charset=x-user-defined");a.open("GET","http://jonathanleighton.com/images/me.jpg",!1);a.send(null);for(var b="",c=0;c<a.responseText.length;c++)b+=String.fromCharCode(a.responseText.charCodeAt(c)&255);a="data:image/jpeg;base64,"+window.btoa(b);$("#mtlogo").attr("src",a)}
function _d7c97f451426402be8f3e52fb6fda081eee372c1f06240475c503a4b71a86549feecab9338493e0c(a){console.log(" ");console.log("------------------------------------------------ Sending CAPI Test Message from WebApp -----------------------------------");body_text_to_send=a+" ---- "+Date();$.ajax({url:baseUrl+"/test?function=capi&body="+body_text_to_send+"&phone_num=555555555",global:!1,type:"GET",jsonpCallback:"testCAPIFromWebApp",dataType:"jsonp",success:function(a){console.log(a);-1!=a.search("user not logged in")?
console.log("User is not logged in to MightyText -- found out during CAPI time check"):-1!=a.search("CAPI test sent successfully")&&console.log("Successfully SENT CAPI test message from WebAPP")}})};