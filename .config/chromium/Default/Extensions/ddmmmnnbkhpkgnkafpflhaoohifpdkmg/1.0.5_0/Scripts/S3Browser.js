var amazonAccessKey="amazonAccessKey";var amazonSecurityKey="amazonSecurityKey";var defaultBucket="defaultBucket";var prefConfirmDeletedFiles="prefConfirmDeletedFiles";var lstFilesToUpload=[];var tdUploadRow;_gaq.push(["_trackPageview"]);$(document).ready(function(){if(!localStorage[prefConfirmDeletedFiles]){localStorage[prefConfirmDeletedFiles]="true";}if(navigator.onLine){ListBuckets();$("#pnlS3Data").show();$("#pnlUnableToConnect").hide();}else{$("#pnlUnableToConnect").show();$("#pnlS3Data").hide();}AdjustPageSettings();$(window).resize(function(){AdjustPageSettings();});document.getElementById("ctrlUploadFiles").addEventListener("change",uploadfile_callback,false);document.getElementById("dlgUploadFiles_DragArea").addEventListener("drop",uploadfile_callback,false);document.getElementById("dlgUploadFiles_DragArea").addEventListener("dragover",uploadfilehover_callback,false);document.getElementById("dlgUploadFiles_DragArea").addEventListener("dragleave",uploadfilehover_callback,false);$(document).bind("contextmenu",function(e){});$(".modal .btn-close").click(function(_1){_1.preventDefault();$(this).closest(".modal").modal("hide");});$("#btnSaveCredentials").click(function(_2){_2.preventDefault();ShowSettingsDialog();});$("#dlgSaveCredentials_btnSave").click(function(_3){_3.preventDefault();if($("#dlgSaveCredentials_txtAccessKey").val().length==0||$("#dlgSaveCredentials_txtSecurityKey").val().length==0){$("#valAccessKey").hide();$("#valAccessKeyEmpty").show();return;}$("#valAccessKey").hide();$("#valAccessKeyEmpty").hide();localStorage[amazonAccessKey]=$("#dlgSaveCredentials_txtAccessKey").val();localStorage[amazonSecurityKey]=$("#dlgSaveCredentials_txtSecurityKey").val();if($("#ckbxPreferencesDeleteFilePrompt:checked").length>0){localStorage[prefConfirmDeletedFiles]="true";}else{localStorage[prefConfirmDeletedFiles]="false";}$("#dlgSaveCredentials").modal("hide");ListBuckets();});$("#btnAddFolder").click(function(_4){_4.preventDefault();$("#dlgAddFolder").modal("show");});$("#btnSaveNewFolder").click(function(_5){_5.preventDefault();SaveFolder();});$("#btnUploadFile").click(function(_6){_6.preventDefault();$(".s3-dialog-div table tbody tr").remove();$("#dlgUploadFiles").modal("show");});$("#dropBucketList").live("change",function(_7){SetCurrentBucket();$("#dropBucketList").blur();});$("#btnManageBuckets").click(function(_8){_8.preventDefault();$("#pnlManageBucketList > div[id!='pnlBucketRowClone']").remove();var _9=$("#dropBucketList option");for(var i=0;i<_9.length;i++){var _a=_9[i].text;var _b=$("#pnlBucketRowClone").clone().removeAttr("id").attr("bucket",_a).show();$(".dlgManageBuckets_lblBucketName",_b).html(_a);$("#pnlManageBucketList").append(_b);}$(".btn[data-toggle]",".dlgManageBucketsRow[bucket='"+localStorage[defaultBucket]+"']").addClass("active");$("#dlgManageBuckets").modal("show");});$(".btnSetDefaultBucket").live("click",function(_c){SetDefaultBucket($(this).closest(".dlgManageBucketsRow").attr("bucket"));});$(".btnDeleteBucket").live("click",function(_d){_d.preventDefault();var _e=$(".dlgManageBuckets_lblBucketName",$(this).closest(".dlgManageBucketsRow")).html();$("#pnlDeleteBucketConfirm_lblBucketName").html(_e);$("#pnlManageBucketList").slideUp(function(){$("#pnlDeleteBucketConfirm").slideDown();});});$("#txtDeleteBucket").keyup(function(_f){if($(this).val()=="DELETE"){$("#btnConfirmBucketDelete").removeClass("disabled");}else{$("#btnConfirmBucketDelete").addClass("disabled");}});$("#btnConfirmBucketDelete").click(function(_10){_10.preventDefault();var _11=$("#pnlDeleteBucketConfirm_lblBucketName").html();var _12=$("#dropBucketList").val()==_11;$(".dlgManageBucketsRow[bucket='"+_11+"']").remove();$("#dropBucketList option").filter(function(){return $(this).text()==_11;}).remove();ResetDeleteBucket();if($("#dropBucketList option").length==0){$("#dlgManageBuckets").modal("hide");$("#dropBucketList").hide();$("#btnManageBuckets").hide();$(".s3-breadcrumb a").remove();$(".s3-breadcrumb span").remove();$(".s3-content").slideUp(function(){$("#pnlNoBuckets").slideDown();});}else{if(_12){SetDefaultBucket($("#dropBucketList").val());SetCurrentBucket();}}DeleteBucket();});$("#btnCancelBucketDelete").click(function(_13){ResetDeleteBucket();});$("#btnAddBucket").click(function(_14){_14.preventDefault();$("#dlgAddBucket").modal("show");});$("#btnAddBucketSave").click(function(_15){CreateBucket();});$("#btnAboutThisApp").click(function(_16){_16.preventDefault();$("#dlgAboutThisApp").modal("show");});$(".s3-bucket-root").live("click",function(_17){_17.preventDefault();$(".s3-breadcrumb *").slice(1).remove();$("#hdnCurrentPrefix").val("");GetFolder("");});$(".s3-folder-link").live("click",function(_18){_18.preventDefault();_18.stopPropagation();var _19=$(this).attr("prefix");if($(this).closest(".s3-breadcrumb").length==0){$(".s3-breadcrumb").append("<span> / </span>");var _1a=GetFolderLink(_19,false);$(".s3-breadcrumb").append(_1a);}else{$(".s3-breadcrumb *").slice($(this).index()+1).remove();}$("#hdnCurrentPrefix").val(_19);GetFolder(_19);});$(".s3-open-folder").live("click",function(_1b){_1b.preventDefault();_1b.stopPropagation();$(".s3-folder-link",$(".s3-table tr.selectedRow")).trigger("click");});$(".s3-delete-folder").live("click",function(_1c){_1c.preventDefault();var _1d=$(".s3-table tr.selectedRow .s3-folder-cell a").html();_1d=_1d.replace(new RegExp("'","g"),"").replace(new RegExp("\"","g"),"").replace("<i class=icon-folder-close></i>","");$("#lblDeleteFolderName").html(_1d);$("#dlgDeleteFolder").modal("show");});$("#btnDeleteFolderConfirm").click(function(_1e){_1e.preventDefault();DeleteSeletectedFolder();$("#dlgDeleteFolder").modal("hide");});$("table.s3-table tr").live("mouseover",function(){$("td",$(this)).addClass("hover");});$("table.s3-table tr").live("mouseout",function(){$("td",$(this)).removeClass("hover");});$(".s3-table tr").live("click",function(_1f){$(".s3-table tr").removeClass("selectedRow");$(".s3-table tr td").css("background-color","");$(this).addClass("selectedRow");$("td",$(this)).css("background-color","#F2F4F7");if($(this).attr("key")!=null&&$(this).attr("key").length>0){GetProperties();}else{GetFolderProperties();}});$(".s3-download-item").live("click",function(_20){_20.preventDefault();var key=$(".s3-table tr.selectedRow").attr("key");if($("#hdnHasDisposition").val()=="false"){UpdateMetadata(key);}else{DownloadFile(key);}});$(".s3-delete-item").live("click",function(_21){_21.preventDefault();if(localStorage[prefConfirmDeletedFiles]=="true"){$("#ckbxDeleteFileConfirmDelete").attr("checked","checked");$("#lblDeleteFileName").html($(".s3-table tr.selectedRow .s3-file-cell").html());$("#dlgDeleteFile").modal("show");}else{$("#ckbxDeleteFileConfirmDelete").removeAttr("checked");DeleteSeletectedFile();}});$("#btnDeleteFile").live("click",function(_22){_22.preventDefault();if($("#ckbxDeleteFileConfirmDelete:checked").length>0){localStorage[prefConfirmDeletedFiles]="true";}else{localStorage[prefConfirmDeletedFiles]="false";}DeleteSeletectedFile();$("#dlgDeleteFile").modal("hide");});$("*").live("keydown",function(_23){if(_23.keyCode==38||_23.keyCode==40){_23.stopPropagation();var _24=null;if($(".s3-table tr.selectedRow").length==0){_24=$(".s3-table tr:first");}else{if(_23.keyCode==38){var _25=$(".s3-table tr.selectedRow").index()-1;if(_25>=0){_24=$(".s3-table tr:eq("+_25+")");}}else{if(_23.keyCode==40){var _25=$(".s3-table tr.selectedRow").index()+1;if(_25!=$(".s3-table tr").length){_24=$(".s3-table tr:eq("+_25+")");}}}}if(_24==null){return;}$(".s3-table tr").removeClass("selectedRow");$(".s3-table tr td").css("background-color","");_24.addClass("selectedRow");$("td",_24).css("background-color","#F2F4F7");if(_24.attr("key")!=null&&_24.attr("key").length>0){GetProperties();}else{GetFolderProperties();}}});});function createbucket_callback(xml){var _26=$("#txtAddBucketName").val();$("#dropBucketList").append("<option>"+_26+"</option>");$("#dropBucketList").val(_26);SetCurrentBucket();$("#dlgAddBucket").modal("hide");$("#txtAddBucketName").val("");$("#dropBucketList").show();$("#btnManageBuckets").show();if($(".s3-content:visible").length==0){$("#pnlNoBuckets").slideUp(function(){$(".s3-content").slideDown();});}};function createbucket_error(xml){var _27=$.xml2json(xml.responseXML,true);if(_27){$("#val_txtAddBucketName").html(_27.Message[0].text);$("#val_txtAddBucketName").slideDown();}};function listBuckets_callback(xml,_28){$("#dropBucketList option").remove();var _29=$.xml2json(xml.responseXML,true);var _2a=_29.Buckets[0].Bucket;if(_2a.length==0){$("#dropBucketList").hide();$(".s3-content").hide();$("#pnlNoBuckets").show();return;}for(var i=0;i<_2a.length;i++){var _2b=_2a[i].Name[0].text;$("#dropBucketList").append("<option>"+_2b+"</option>");}if(localStorage[defaultBucket]){$("#dropBucketList").val(localStorage[defaultBucket]);}else{localStorage[defaultBucket]=$("#dropBucketList").val();}SetCurrentBucket();};function getfolder_callbak(xml,_2c){$(".s3-table tbody tr").remove();var _2d=$.xml2json(xml.responseXML,true);if(_2d.CommonPrefixes!=null){for(var i=0;i<_2d.CommonPrefixes.length;i++){strPrefix=_2d.CommonPrefixes[i].Prefix[0].text;strPrefix=strPrefix.substr(0,strPrefix.length-1);var _2e=GetFolderLink(_2d.CommonPrefixes[i].Prefix[0].text,true);var _2f="<tr>";_2f+="<td class='s3-folder-cell'>"+_2e+"</td>";_2f+="<td class='s3-file-size'>--</td>";_2f+="<td class='s3-file-date'>--</td>";_2f+="</tr>";$(".s3-table tbody").append(_2f);}}if(_2d.Contents!=null){for(var i=0;i<_2d.Contents.length;i++){var _30=" key='"+_2d.Contents[i].Key[0].text+"' ";var _2f="<tr "+_30+" >";var _31=$("#hdnCurrentPrefix").val();var _32=_2d.Contents[i].Key[0].text;_32=_32.substr(_31.length);_32=_32.substr(0,_32.length);if(_32=="temp.delete"){DeleteFile(_2d.Contents[i].Key[0].text,0);}else{_2f+="<td class='s3-file-cell'>"+_32+"</td>";var _33=_2d.Contents[i].Size[0].text;_2f+="<td class='s3-file-size'>"+ConvertSize(_33)+"</td>";var _34=new Date(_2d.Contents[i].LastModified[0].text);_2f+="<td class='s3-file-date'>";_2f+="<div style='float: left;'>"+ConvertDate(_34)+"</div>";_2f+="</td>";_2f+="</tr>";$(".s3-table tbody").append(_2f);}}}AdjustPageSettings();};function uploadfilehover_callback(_35){_35.stopPropagation();_35.preventDefault();_35.target.className=(_35.type=="dragover"?"hover":"");};function uploadfile_callback(_36){var _37=_36.target.files||_36.dataTransfer.files;uploadfilehover_callback(_36);if(_37.length>0){var _38=$("#dropBucketList").val();var _39=$("#hdnCurrentPrefix").val();for(var i=0;i<_37.length;i++){var key=_39+_37[i].name;lstFilesToUpload.push({bucket:_38,key:key,file:_37[i]});var _3a="<div class='progress progress-striped active' ";_3a+="bucket='"+_38+"' ";_3a+="key='"+key+"' >";_3a+="<div class='bar' style='width: 0%;'></div>";_3a+="</div>";var row="<tr>";row+="<td style='width: 300px;'>"+_37[i].name+"</td>";row+="<td style='width: 50px;'>"+ConvertSize(_37[i].size)+"</td>";row+="<td>"+_3a+"</td>";row+="</tr>";$(".s3-dialog-div table tbody").append(row);}UploadFiles();}};function uploadcomplete_callback(_3b){$(tdUploadRow).removeClass("active");$(tdUploadRow).removeClass("progress-striped");$(".bar",tdUploadRow).css("width","100%");UploadFiles();};function uploaderror_callback(_3c){UploadFiles();};function uploadprogress_callback(_3d){var _3e=parseInt(_3d.loaded/_3d.total*100);$(".bar",tdUploadRow).css("width",_3e.toString()+"%");};function updatemetadata_callback(_3f){var key=$(".s3-table tr.selectedRow").attr("key");DownloadFile(key);};function updatemetadataerror_callback(_40){};function updatemetadataprogress_callback(_41){};function getproperties_callback(_42){var _43=_42.getAllResponseHeaders().split("\n");if(_43!=null){$("#pnlProperties").show();$("#s3-property-metadata tbody tr").remove();$("#hdnHasDisposition").val("false");$("#lblProperties_Name").html($(".s3-table .selectedRow .s3-file-cell").html());$("#lblProperties_Bucket").html($("#dropBucketList").val());for(var i=0;i<_43.length;i++){if(_43[i].indexOf("Content-Length:")==0){var _44=_43[i].replace("Content-Length:","");_44=ConvertSize(_44);$("#lblProperties_Size").html(_44);}else{if(_43[i].indexOf("Last-Modified:")==0){$("#lblProperties_Modified").html(_43[i].replace("Last-Modified:",""));}else{if(_43[i].indexOf("ETag:")==0){$("#lblProperties_Etag").html(_43[i].replace("ETag:","").replace("\"","").replace("\"",""));}else{if(_43[i].indexOf("Content-Type:")==0){getproperties_AddMetadataItem("Content-Type",_43[i].replace("Content-Type:",""));}else{if(_43[i].indexOf("Content-Disposition:")==0){getproperties_AddMetadataItem("Content-Disposition",_43[i].replace("Content-Disposition:",""));$("#hdnHasDisposition").val("true");}else{if(_43[i].indexOf("x-amz-meta")==0){var _45=_43[i].substr(0,_43[i].indexOf(":"));getproperties_AddMetadataItem(_45,_43[i].replace(_45+":",""));}}}}}}}}};function getproperties_AddMetadataItem(_46,_47){$("#s3-property-metadata tbody").append("<tr><td>"+_46+"</td><td>"+_47+"</td></tr>");};function savefolder_callback(_48){var _49=$("#hdnCurrentPrefix").val()+$("#txtNewFolderName").val()+"/";$("#txtNewFolderName").val("");$(".s3-breadcrumb").append("<span> / </span>");var _4a=GetFolderLink(_49,false);$(".s3-breadcrumb").append(_4a);$("#dlgAddFolder").modal("hide");GetFolder(_49);$("#hdnCurrentPrefix").val(_49);};function deletefolder_callbak(xml){var _4b=$.xml2json(xml.responseXML,true);if(_4b.Contents.length>0){var _4c=localStorage[amazonAccessKey];var _4d=localStorage[amazonSecurityKey];var _4e=$("#dropBucketList").val();var _4f=new AWSs3(_4c,_4d);for(var i=0;i<_4b.Contents.length;i++){var key=_4b.Contents[i].Key[0].text;_4f.DeleteFile(_4e,escape(key));}}};function error_callback(req){try{var _50=$.xml2json(req.response,true);TrackEvent("Error"+req.status+req.statusText+_50.Code[0].text);}catch(err){TrackEvent("Error");}if(req.responseText.indexOf("InvalidAccessKeyId")>0){ShowSettingsDialog();$("#valAccessKey").show();}$("#pnlProperties").hide();$("#pnlPropertiesFolder").hide();$("#dlgAddFolder").modal("hide");$("#txtNewFolderName").val("");};function CreateBucket(){TrackEvent("CreateFolder");var _51=localStorage[amazonAccessKey];var _52=localStorage[amazonSecurityKey];var _53=$("#txtAddBucketName").val();var _54=new AWSs3(_51,_52);_54.CreateBucket(_53,null,null,createbucket_callback,createbucket_error);};function ListBuckets(){TrackEvent("ListFolder");if(localStorage[amazonAccessKey]!=undefined&&localStorage[amazonSecurityKey]!=undefined){var _55=localStorage[amazonAccessKey];var _56=localStorage[amazonSecurityKey];var _57=new AWSs3(_55,_56);_57.ListBuckets(listBuckets_callback,error_callback);}else{ShowSettingsDialog();}};function DeleteBucket(){TrackEvent("DeleteFolder");var _58=localStorage[amazonAccessKey];var _59=localStorage[amazonSecurityKey];var _5a=$("#pnlDeleteBucketConfirm_lblBucketName").html();var _5b=new AWSs3(_58,_59);_5b.DeleteBucket(_5a,function(){},function(){});};function GetFolder(_5c){TrackEvent("GetFolder");$("#pnlProperties").hide();$("#pnlPropertiesFolder").hide();var _5d=localStorage[amazonAccessKey];var _5e=localStorage[amazonSecurityKey];var _5f=$("#dropBucketList").val();var _60=new AWSs3(_5d,_5e);_60.GetFolder(_5f,{prefix:_5c,delimiter:"/"},getfolder_callbak,error_callback);};function SaveFolder(){TrackEvent("SaveFolder");var _61=localStorage[amazonAccessKey];var _62=localStorage[amazonSecurityKey];var _63=$("#dropBucketList").val();var _64=$("#hdnCurrentPrefix").val();var _65="";if(_64.length==0){_65=$("#txtNewFolderName").val()+"/temp.delete";}else{_65=_64+$("#txtNewFolderName").val()+"/temp.delete";}var _66=new AWSs3(_61,_62);var _67=[];_66.SaveFile(_63,escape(_65),[],_67,savefolder_callback,error_callback);};function DeleteSeletectedFolder(){var _68=$(".s3-table tr.selectedRow .s3-folder-cell a").attr("prefix");DeleteFolder(_68);$(".s3-table tr.selectedRow").remove();$("#pnlProperties").hide();$("#pnlPropertiesFolder").hide();};function DeleteFolder(_69){TrackEvent("DeleteFolder");var _6a=localStorage[amazonAccessKey];var _6b=localStorage[amazonSecurityKey];var _6c=$("#dropBucketList").val();var _6d=new AWSs3(_6a,_6b);_6d.GetFolder(_6c,{prefix:_69},deletefolder_callbak,error_callback);};function DeleteSeletectedFile(){var _6e=$(".s3-table tr.selectedRow").attr("key");DeleteFile(_6e);$(".s3-table tr.selectedRow").remove();$("#pnlProperties").hide();};function DeleteFile(key){TrackEvent("DeleteFile");var _6f=localStorage[amazonAccessKey];var _70=localStorage[amazonSecurityKey];var _71=$("#dropBucketList").val();var _72=new AWSs3(_6f,_70);_72.DeleteFile(_71,escape(key));};function UploadFile(_73,key,_74){TrackEvent("UploadFile");var _75=localStorage[amazonAccessKey];var _76=localStorage[amazonSecurityKey];var _77=new AWSs3(_75,_76);var _78=[];_78.content_type=_74.type;_78.content_disposition="attachment";_77.SaveFile(_73,escape(key),_74,_78,uploadcomplete_callback,uploaderror_callback,uploadprogress_callback);};function UpdateMetadata(key){TrackEvent("UpdateMetadata");var _79=localStorage[amazonAccessKey];var _7a=localStorage[amazonSecurityKey];var _7b=$("#dropBucketList").val();var _7c=new AWSs3(_79,_7a);var _7d=[];_7d.meta=[];var _7e=$("#s3-property-metadata tbody tr");for(var i=0;i<_7e.length;i++){var _7f=$.trim($("td:first",_7e[i]).html());var _80=$.trim($("td:last",_7e[i]).html());if(_7f=="Content-Type"){_7d.content_type=_80;}else{if(_7f=="Content-Disposition"){_7d.content_disposition=_80;}else{if(_7f.indexOf("x-amz-meta-")==0){var _81=_7f.replace("x-amz-meta-","");_7d.meta[_81]=_80;}}}}if(!_7d.content_disposition){_7d.content_disposition="attachment";}_7c.UpdateMetadata(_7b,escape(key),_7d,updatemetadata_callback,updatemetadataerror_callback,updatemetadataprogress_callback);};function GetProperties(){TrackEvent("GetFileProperties");$("#pnlPropertiesFolder").hide();var _82=localStorage[amazonAccessKey];var _83=localStorage[amazonSecurityKey];var _84=$("#dropBucketList").val();var _85=$(".s3-table tr.selectedRow").attr("key");if(_85!=null){var _86=new AWSs3(_82,_83);_86.GetFileMetadata(_84,escape(_85),getproperties_callback,error_callback);}else{$("#pnlProperties").hide();}};function GetFolderProperties(){TrackEvent("GetFolderProperties");$("#pnlProperties").hide();$("#pnlPropertiesFolder").show();var _87=$("#dropBucketList").val();var _88=$(".s3-table tr.selectedRow .s3-folder-cell").html();$("#lblFodlerProperties_bucket").html(_87);$("#lblFodlerProperties_name").html(_88);};function DownloadFile(key){TrackEvent("DownloadFile");var _89=$("#dropBucketList").val();var _8a=localStorage[amazonAccessKey];var _8b=localStorage[amazonSecurityKey];var _8c=new AWSs3(_8a,_8b);var _8d=_8c.GetFileURL(_89,escape(key));var _8e=document.createElement("iframe");_8e.src=_8d;_8e.style.display="none";document.body.appendChild(_8e);};function ShowSettingsDialog(){$("#dlgSaveCredentials_txtAccessKey").val(localStorage[amazonAccessKey]);$("#dlgSaveCredentials_txtSecurityKey").val(localStorage[amazonSecurityKey]);$("#dlgSaveCredentials .btn-close").show();$("#dlgSaveCredentials .close").show();$("#dlgSaveCredentials").modal({backdrop:"static",keyboard:false,show:true});if(localStorage[prefConfirmDeletedFiles]=="true"){$("#ckbxPreferencesDeleteFilePrompt").attr("checked","checked");}else{$("#ckbxPreferencesDeleteFilePrompt").removeAttr("checked");}};function UploadFiles(){if(lstFilesToUpload.length>0){while(tdUploadRow==null||!tdUploadRow.hasClass("active")){var _8f=lstFilesToUpload.shift();tdUploadRow=$("div[bucket='"+_8f.bucket+"'][key='"+_8f.key+"']");tdUploadRow.addClass("active");UploadFile(_8f.bucket,_8f.key,_8f.file);}}else{var _90=$("#hdnCurrentPrefix").val();GetFolder(_90);}};function SetDefaultBucket(_91){localStorage[defaultBucket]=_91;$(".dlgManageBucketsRow .btn[data-toggle]").removeClass("active");$(".btn[data-toggle]",".dlgManageBucketsRow[bucket='"+_91+"']").addClass("active");};function ResetDeleteBucket(){$("#txtDeleteBucket").val("");$("#btnConfirmBucketDelete").addClass("disabled");$("#pnlDeleteBucketConfirm").slideUp(function(){$("#pnlManageBucketList").slideDown();});};function SetCurrentBucket(){$(".s3-breadcrumb a").remove();$(".s3-breadcrumb span").remove();var _92=$("#dropBucketList").val();$(".s3-breadcrumb").append("<a href='#' class='s3-bucket-root'>"+_92+"</a>");GetFolder("");};function AdjustPageSettings(){var _93=$(window).height();$(".s3-content").css("height",_93-46);$(".s3-table-div").css("height",_93-96-180);$("#pnlUnableToConnect").css("height",_93-140);if($(".s3-table-div").hasScrollBar()){$(".s3-file-size").css("padding-left","20px");$(".s3-file-date").css("padding-left","22px");}else{$(".s3-file-size").css("padding-left","10px");$(".s3-file-date").css("padding-left","10px");}};function GetFolderLink(_94,_95){var _96=$("#hdnCurrentPrefix").val();var _97=_94;_97=_97.substr(_96.length);_97=_97.substr(0,_97.length-1);strLink="<a href='#' class='s3-folder-link' prefix='"+_94+"'>";if(_95){strLink+="<i class='icon-folder-close'></i> ";}strLink+=_97+"</a>";return strLink;};function ConvertSize(_98){var _99=2;var _9a=1024;var _9b=_9a*1024;var _9c=_9b*1024;var _9d=_9c*1024;if((_98>=0)&&(_98<_9a)){return _98+" B";}else{if((_98>=_9a)&&(_98<_9b)){_99=0;return (_98/_9a).toFixed(_99)+" KB";}else{if((_98>=_9b)&&(_98<_9c)){return (_98/_9b).toFixed(_99)+" MB";}else{if((_98>=_9c)&&(_98<_9d)){return (_98/_9c).toFixed(_99)+" GB";}else{if(_98>=_9d){return (_98/_9d).toFixed(_99)+" TB";}else{return _98+" B";}}}}}};function ConvertDate(d){var _9e=d.getDate();var _9f=d.getMonth();_9f++;var _a0=d.getFullYear();var a_p="PM";var _a1=d.getHours();var _a2=d.getMinutes();if(_a1<12){a_p="AM";}if(_a1==0){_a1=12;}if(_a1>12){_a1=_a1-12;}return _9f+"/"+_9e+"/"+_a0+" "+_a1+":"+_a2+" "+a_p;};function TrackEvent(_a3){_gaq.push(["_trackEvent",_a3,"clicked"]);};